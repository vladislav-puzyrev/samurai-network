(this["webpackJsonpsamurai-network"]=this["webpackJsonpsamurai-network"]||[]).push([[0],{100:function(e,t,a){e.exports={textarea:"Textarea_textarea__32chH",error:"Textarea_error__1Ernb"}},101:function(e,t,a){e.exports={info:"UserInfo_info__zWzay",userName:"UserInfo_userName__2HoIC"}},12:function(e,t,a){e.exports={menu:"Menu_menu__27qdF",menuLink:"Menu_menuLink__EHAtu",active:"Menu_active__2D1vX",messagesCount:"Menu_messagesCount__Gcpgc"}},136:function(e,t,a){e.exports={footer:"Footer_footer__3hmYT"}},137:function(e,t,a){e.exports={aside:"Sidebar_aside__1e2NK"}},140:function(e,t,a){e.exports={content:"Main_content__2h5Jj"}},142:function(e,t,a){e.exports={button:"Button_button__OZeNM"}},143:function(e,t,a){e.exports={users:"UsersList_users__WQVOf"}},144:function(e,t,a){},145:function(e,t,a){},146:function(e,t,a){},147:function(e,t,a){e.exports={form:"Login_form__3z_ct"}},149:function(e,t,a){e.exports={wrapper:"Interlocutors_wrapper__2zA-0"}},150:function(e,t,a){e.exports={wrapper:"InterlocutorsList_wrapper__15THU",ul:"InterlocutorsList_ul__3JB43"}},151:function(e,t,a){e.exports={wrapper:"Dialog_wrapper__111U0"}},152:function(e,t,a){e.exports={wrapper:"DialogMessages_wrapper__2CNKp"}},153:function(e,t,a){e.exports={messages:"Messages_messages__sE-hE"}},180:function(e,t,a){e.exports=a(307)},185:function(e,t,a){},25:function(e,t,a){e.exports=a.p+"static/media/defaultAvatar.b4b85090.png"},26:function(e,t,a){e.exports={user:"User_user__3Qdic",avatarBox:"User_avatarBox__dLefj",info:"User_info__3dI-o",userName:"User_userName__1AQPc",followButton:"User_followButton__y-S0x",sendMessage:"User_sendMessage__39BmE",userStatus:"User_userStatus__1tTcC"}},27:function(e,t,a){e.exports={wrapper:"InterlocutorsListItem_wrapper__1IgFZ",userName:"InterlocutorsListItem_userName__1P_t4",li:"InterlocutorsListItem_li__1DLA-",a:"InterlocutorsListItem_a__Eytt8",active:"InterlocutorsListItem_active__3BK1D",avatar:"InterlocutorsListItem_avatar__3l5eU",info:"InterlocutorsListItem_info__2OczL",infoMessage:"InterlocutorsListItem_infoMessage__GcUxi"}},307:function(e,t,a){"use strict";a.r(t);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var n=a(0),r=a.n(n),s=a(63),c=a.n(s),o=(a(185),a(11)),u=a(93),l=a.n(u),i=a(136),m=a.n(i);var p=function(){return r.a.createElement("footer",{className:m.a.footer},"samurai-network")},f=a(137),d=a.n(f),g=a(7),v=a(12),E=a.n(v),_=function(e){var t=e.newMessagesCount;return r.a.createElement("ul",{className:E.a.menu},r.a.createElement("li",{className:E.a.menuItem},r.a.createElement(g.b,{exact:!0,to:"/profile",className:E.a.menuLink,activeClassName:E.a.active},"\u041c\u043e\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430")),r.a.createElement("li",{className:E.a.menuItem},r.a.createElement(g.b,{to:"/messages",className:E.a.menuLink,activeClassName:E.a.active},"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f ",t>0&&"(".concat(t,")"))),r.a.createElement("li",{className:E.a.menuItem},r.a.createElement(g.b,{to:"/users",className:E.a.menuLink,activeClassName:E.a.active},"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438")),r.a.createElement("li",{className:E.a.menuItem},r.a.createElement(g.b,{to:"/news",className:E.a.menuLink,activeClassName:E.a.active},"\u041d\u043e\u0432\u043e\u0441\u0442\u0438")),r.a.createElement("li",{className:E.a.menuItem},r.a.createElement(g.b,{to:"/music",className:E.a.menuLink,activeClassName:E.a.active},"\u041c\u0443\u0437\u044b\u043a\u0430")),r.a.createElement("li",{className:E.a.menuItem},r.a.createElement(g.b,{to:"/settings",className:E.a.menuLink,activeClassName:E.a.active},"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438")))},h=a(1),w=a.n(h),b=a(66),N=a(6),x=a(139),I=a.n(x).a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"ca3b0eb4-4af6-4803-8caa-f7d26464a12c"}}),y=function(e,t){var a,n,r=arguments;return w.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return a=r.length>2&&void 0!==r[2]?r[2]:"",s.next=3,w.a.awrap(I.get("users?count=".concat(e,"&page=").concat(t,"&term=").concat(a)));case 3:return n=s.sent,s.abrupt("return",n.data);case 5:case"end":return s.stop()}}))},P=function(e){var t;return w.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,w.a.awrap(I.post("follow/".concat(e)));case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}))},O=function(e){var t;return w.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,w.a.awrap(I.delete("follow/".concat(e)));case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}))},D=function(e){var t;return w.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,w.a.awrap(I.get("profile/".concat(e)));case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}))},S=function(e){var t;return w.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,w.a.awrap(I.get("profile/status/".concat(e)));case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}))},C=function(e){var t;return w.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,w.a.awrap(I.put("profile/status",{status:e}));case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}))},A=function(e){var t,a;return w.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return(t=new FormData).append("image",e),n.next=4,w.a.awrap(I.put("profile/photo",t,{headers:{"Content-Type":"multipart/form-data"}}));case 4:return a=n.sent,n.abrupt("return",a.data);case 6:case"end":return n.stop()}}))},j=function(e){var t;return w.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,w.a.awrap(I.put("profile",e));case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}))},k=function(){var e;return w.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.a.awrap(I.get("auth/me"));case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}))},F=function(e,t){var a,n,r,s=arguments;return w.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return a=!(s.length>2&&void 0!==s[2])||s[2],n=s.length>3?s[3]:void 0,c.next=4,w.a.awrap(I.post("auth/login",{email:e,password:t,rememberMe:a,captcha:n}));case 4:return r=c.sent,c.abrupt("return",r.data);case 6:case"end":return c.stop()}}))},M=function(){var e;return w.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.a.awrap(I.post("auth/logout"));case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}))},T=function(){var e;return w.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.a.awrap(I.get("security/get-captcha-url"));case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}))},U=function(e){var t;return w.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,w.a.awrap(I.put("dialogs/".concat(e)));case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}))},L=function(){var e;return w.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.a.awrap(I.get("dialogs"));case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}))},G=function(e){var t;return w.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,w.a.awrap(I.get("dialogs/".concat(e,"/messages")));case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}))},R=function(e,t){var a;return w.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,w.a.awrap(I.post("dialogs/".concat(e,"/messages"),{body:t}));case 2:return a=n.sent,n.abrupt("return",a.data);case 4:case"end":return n.stop()}}))},B=function(e,t){var a;return w.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,w.a.awrap(I.get("dialogs/".concat(e,"/messages/new?newerThen=").concat(t)));case 2:return a=n.sent,n.abrupt("return",a.data);case 4:case"end":return n.stop()}}))},z=function(){var e;return w.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.a.awrap(I.get("dialogs/messages/new/count"));case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}))},H="samurai-network/messages/SET_INTERLOCUTORS",W="samurai-network/messages/SET_NEW_INTERLOCUTOR",J="samurai-network/messages/SET_CURRENT_DIALOG",K="samurai-network/messages/SET_MESSAGES_AFTER_DATE",Z="samurai-network/messages/SET_NEW_MESSAGES_COUNT",q="samurai-network/messages/TOGGLE_IS_FETCHING",V={interlocutors:null,newInterlocutor:null,currentDialog:null,messagesAfterDate:null,newMessagesCount:0,fetching:{interlocutors:!1,newInterlocutor:!1,currentDialog:!1,messagesAfterDate:!1,newMessagesCount:!1}};var X=function(e,t){return{type:q,property:e,isFetching:t}},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case H:return Object(N.a)({},e,{interlocutors:t.messages});case W:return Object(N.a)({},e,{newInterlocutor:t.profile});case J:return Object(N.a)({},e,{currentDialog:t.currentDialog});case K:return Object(N.a)({},e,{messagesAfterDate:t.messagesAfterDate});case Z:return Object(N.a)({},e,{newMessagesCount:t.count});case q:return Object(N.a)({},e,{fetching:Object(N.a)({},e.fetching,Object(b.a)({},t.property,t.isFetching))});default:return e}};var Q=Object(o.b)((function(e){return{newMessagesCount:e.messagesPage.newMessagesCount}}),{getNewMessagesCount:function(){return function(e){var t;return w.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return e(X("newMessagesCount",!0)),a.next=3,w.a.awrap(z());case 3:t=a.sent,e({type:Z,count:t}),e(X("newMessagesCount",!1));case 6:case"end":return a.stop()}}))}}})((function(e){var t=e.newMessagesCount,a=e.getNewMessagesCount;return Object(n.useEffect)((function(){a()}),[a]),r.a.createElement("aside",{className:d.a.aside},r.a.createElement(_,{newMessagesCount:t}))})),$=a(32),ee=a(140),te=a.n(ee),ae=a(18),ne=a(69),re="samurai-network/users/FOLLOW",se="samurai-network/users/UNFOLLOW",ce="samurai-network/users/SET_USERS",oe="samurai-network/users/SET_CURRENT_PAGE",ue="samurai-network/users/SET_TOTAL_USERS_COUNT",le="samurai-network/users/SET_TERM",ie="samurai-network/users/TOGGLE_IS_FETCHING",me="samurai-network/users/TOGGLE_IS_FOLLOWING_PROGRESS",pe={users:[],totalUsersCount:0,currentPage:1,isFetching:!1,followingInProgress:[],term:""};var fe=function(e){return{type:ce,users:e}},de=function(e){return{type:ue,totalUsersCount:e}},ge=function(e){return{type:ie,isFetching:e}},ve=function(e,t){return{type:me,isFetching:e,userId:t}},Ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case re:return Object(N.a)({},e,{users:e.users.map((function(e){return e.id===t.id?Object(N.a)({},e,{followed:!0}):e}))});case se:return Object(N.a)({},e,{users:e.users.map((function(e){return e.id===t.id?Object(N.a)({},e,{followed:!1}):e}))});case ce:return Object(N.a)({},e,{users:t.users});case oe:return Object(N.a)({},e,{currentPage:t.currentPage});case ue:return Object(N.a)({},e,{totalUsersCount:t.totalUsersCount});case ie:return Object(N.a)({},e,{isFetching:t.isFetching});case me:return Object(N.a)({},e,{followingInProgress:t.isFetching?[].concat(Object(ne.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!==t.userId}))});case le:return Object(N.a)({},e,{term:t.term});default:return e}},_e=a(141),he=function(e){return e.usersPage.users},we=Object(_e.a)(he,(function(e){return e.filter((function(){return!0}))})),be=function(e){return e.usersPage.totalUsersCount},Ne=function(e){return e.usersPage.currentPage},xe=function(e){return e.usersPage.isFetching},Ie=function(e){return e.usersPage.followingInProgress},ye=a(10),Pe=a(70),Oe=a.n(Pe),De=a(142),Se=a.n(De),Ce=function(e){var t=e.width,a=e.children,n=e.onClick,s=e.margin,c=e.type;return r.a.createElement("button",{type:c,onClick:n,style:{width:t,margin:s},className:Se.a.button},a)},Ae=r.a.memo((function(e){var t=e.setTerm,a=e.setCurrentPage,s=e.setPortionNumber,c=Object(n.useState)(""),o=Object(ae.a)(c,2),u=o[0],l=o[1],i={cursor:u?"pointer":"not-allowed"};return r.a.createElement("div",{className:Oe.a.div},r.a.createElement("input",{placeholder:"\u041f\u043e\u0438\u0441\u043a",type:"text",onChange:function(e){l(e.target.value)},className:Oe.a.input,value:u}),r.a.createElement("button",{disabled:!u,style:i,onClick:function(){a(1),t(u),s(1)},className:Oe.a.button},"\u041d\u0430\u0439\u0442\u0438"),r.a.createElement(Ce,{margin:"0 0 0 10px",onClick:function(){a(1),t(""),l(""),s(1)}},"\u0421\u0431\u0440\u043e\u0441"))})),je=a(71),ke=a.n(je),Fe=a(95),Me=a.n(Fe),Te=function(e){var t=e.active,a=e.number,n=t?Me.a.paginationItemActive:"";return r.a.createElement("li",{className:Me.a.paginationItem+" "+n,"data-number":a},a)},Ue=r.a.memo((function(e){var t=e.setCurrentPage,a=e.currentPage,s=e.totalUsersCount,c=e.pageSize,o=e.portionSize,u=e.getRequestUsers,l=e.term,i=e.portionNumber,m=e.setPortionNumber;Object(n.useEffect)((function(){u(c,a,l)}),[u,c,a,l]);for(var p=Math.ceil(s/c),f=[],d=1;d<s;d++)f.push(d);var g=Math.ceil(p/o),v=p/o*o,E=(i-1)*o+1,_=i*o;return r.a.createElement("div",{onClick:function(e){var a=+e.target.dataset.number;a&&function(e){u(c,e,l),t(e)}(a)},className:ke.a.paginationItems},s>0&&r.a.createElement("button",{disabled:1===i,className:ke.a.button,onClick:function(){m(i-1)}},"\u0412\u043b\u0435\u0432\u043e"),f.filter((function(e){return e>=E&&e<=_&&e<=v})).map((function(e){return r.a.createElement(Te,{key:e,number:e,active:+a===e})})),s>0&&r.a.createElement("button",{disabled:g===i,className:ke.a.button,onClick:function(){m(i+1)}},"\u0412\u043f\u0440\u0430\u0432\u043e"))})),Le=a(143),Ge=a.n(Le),Re=a(26),Be=a.n(Re),ze=a(25),He=a.n(ze);var We=function(e){var t=e.user,a=e.followButtonDisabled,n=e.unfollow,s=e.follow;return r.a.createElement("li",{className:Be.a.user},r.a.createElement("div",{className:Be.a.avatarBox},r.a.createElement(g.b,{to:"/profile/".concat(t.id)},r.a.createElement("img",{src:t.photos.small||He.a,alt:"avatar"}))),r.a.createElement("div",{className:Be.a.info},r.a.createElement(g.b,{className:Be.a.userName,to:"/profile/".concat(t.id)},t.name),t.status&&r.a.createElement("span",{className:Be.a.userStatus},t.status),t.followed?r.a.createElement("button",{className:Be.a.followButton,disabled:a,onClick:function(){n(t.id)}},"\u041e\u0442\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f ",r.a.createElement("span",{"aria-label":"\u041e\u0442\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f",role:"img"},"\u274c")):r.a.createElement("button",{className:Be.a.followButton,disabled:a,onClick:function(){s(t.id)}},"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f ",r.a.createElement("span",{"aria-label":"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f",role:"img"},"\u2705")),r.a.createElement(g.b,{to:"/messages/".concat(t.id),className:Be.a.sendMessage},"\u041d\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435")))},Je=a(53),Ke=a.n(Je),Ze=a(96),qe=a.n(Ze),Ve=function(e){var t=e.fullscreen;return void 0!==t&&t?r.a.createElement("div",{className:Ke.a.wrapper},r.a.createElement("div",{className:Ke.a.preloader},r.a.createElement("img",{className:Ke.a.preloaderIMG,src:qe.a,alt:"load"}))):r.a.createElement("img",{className:Ke.a.preloaderIMG,src:qe.a,alt:"load"})},Xe=r.a.memo((function(e){var t=e.users,a=e.followingInProgress,n=e.follow,s=e.unfollow,c=e.isFetching,o=t.length?t.map((function(e){return r.a.createElement(We,{key:e.id,user:e,followButtonDisabled:a.some((function(t){return t===e.id})),follow:n,unfollow:s})})):"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e";return c?r.a.createElement(Ve,null):r.a.createElement("ul",{className:Ge.a.users},o)}));var Ye=Object(ye.d)(Object(o.b)((function(e){return{users:we(e),totalUsersCount:be(e),currentPage:Ne(e),isFetching:xe(e),followingInProgress:Ie(e),term:e.usersPage.term}}),{setCurrentPage:function(e){return{type:oe,currentPage:e}},setIsFetching:ge,getRequestUsers:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return function(n){var r;return w.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return n(ge(!0)),s.next=3,w.a.awrap(y(e,t,a));case 3:r=s.sent,n(fe(r.items)),n(de(r.totalCount)),n(ge(!1));case 7:case"end":return s.stop()}}))}},follow:function(e){return function(t){return w.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t(ve(!0,e)),a.next=3,w.a.awrap(P(e));case 3:0===a.sent.resultCode&&t({type:re,id:e}),t(ve(!1,e));case 6:case"end":return a.stop()}}))}},unfollow:function(e){return function(t){return w.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t(ve(!0,e)),a.next=3,w.a.awrap(O(e));case 3:0===a.sent.resultCode&&t({type:se,id:e}),t(ve(!1,e));case 6:case"end":return a.stop()}}))}},setTerm:function(e){return{type:le,term:e}}}))((function(e){var t=e.currentPage,a=e.totalUsersCount,s=e.isFetching,c=e.users,o=e.followingInProgress,u=e.setCurrentPage,l=e.follow,i=e.unfollow,m=e.setTerm,p=e.getRequestUsers,f=e.term;Object(n.useEffect)((function(){return function(){u(1)}}),[u]);var d=Object(n.useState)(1),g=Object(ae.a)(d,2),v=g[0],E=g[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438"),r.a.createElement(Ae,{setTerm:m,setCurrentPage:u,setPortionNumber:E}),r.a.createElement(Ue,{totalUsersCount:a,currentPage:t,pageSize:6,portionSize:10,getRequestUsers:p,term:f,setCurrentPage:u,portionNumber:v,setPortionNumber:E}),r.a.createElement(Xe,{users:c,followingInProgress:o,follow:l,unfollow:i,isFetching:s}))})),Qe=a(144),$e=a.n(Qe);var et=function(){return r.a.createElement("div",{className:$e.a.messages},"\u041d\u043e\u0432\u043e\u0441\u0442\u0438")},tt=a(145),at=a.n(tt);var nt=function(){return r.a.createElement("div",{className:at.a.messages},"\u041c\u0443\u0437\u044b\u043a\u0430")},rt=a(146),st=a.n(rt);var ct=function(){return r.a.createElement("div",{className:st.a.messages},"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438")},ot=a(132),ut=a(133),lt=function(e){if(!e)return"\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435"},it=a(24),mt="samurai-network/app/INITIALIZED_SUCCESS",pt={initialized:!1};var ft=function(){return function(e,t){var a,n,r;return w.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(a=t().auth.isAuth,n=t().auth.userId,!a||!n){s.next=7;break}return s.next=5,w.a.awrap(D(n));case 5:r=s.sent,e(Nt(r));case 7:case"end":return s.stop()}}))}},dt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt;switch((arguments.length>1?arguments[1]:void 0).type){case mt:return Object(N.a)({},e,{initialized:!0});default:return e}},gt="samurai-network/auth/SET_USER_DATA",vt="samurai-network/auth/SET_CAPTCHA_URL",Et="samurai-network/auth/SET_MY_PROFILE",_t="samurai-network/auth/SET_MY_PHOTO",ht={userId:null,email:null,login:null,isFetching:!1,isAuth:!1,captchaUrl:null,myProfile:null};var wt=function(e,t,a,n){return{type:gt,payload:{userId:e,email:t,login:a,isAuth:n}}},bt=function(e){return{type:vt,captchaUrl:e}},Nt=function(e){return{type:Et,profile:e}},xt=function(e){return{type:_t,photos:e}},It=function(){return function(e){var t,a,n,r,s;return w.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,w.a.awrap(k());case 2:0===(t=c.sent).resultCode&&(a=t.data,n=a.id,r=a.email,s=a.login,e(wt(n,r,s,!0)));case 4:case"end":return c.stop()}}))}},yt=function(){return function(e){var t,a;return w.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,w.a.awrap(T());case 2:t=n.sent,a=t.url,e(bt(a));case 5:case"end":return n.stop()}}))}},Pt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ht,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case gt:return Object(N.a)({},e,{},t.payload);case vt:return Object(N.a)({},e,{captchaUrl:t.captchaUrl});case Et:return Object(N.a)({},e,{myProfile:t.profile});case _t:return Object(N.a)({},e,{myProfile:Object(N.a)({},e.myProfile,{photos:t.photos})});default:return e}},Ot=a(97),Dt=a.n(Ot),St=function(e){var t=e.width,a=e.margin,n=e.placeholder,s=e.meta,c=e.input,o=e.type,u=e.id,l=s.error&&s.touched;return r.a.createElement("span",null,r.a.createElement("input",Object.assign({},c,{id:u,type:o,style:{width:t,margin:a},className:Dt.a.input,placeholder:n})),l&&r.a.createElement("span",{className:l?Dt.a.error:null},s.error))},Ct=a(147),At=a.n(Ct);var jt=Object(ut.a)({form:"login"})((function(e){var t=e.handleSubmit,a=e.error,n=e.captchaUrl,s=e.logTestAccount;return r.a.createElement("form",{onSubmit:t,className:At.a.form},r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"loginLogin"},"Email"),r.a.createElement(ot.a,{width:"250px",type:"text",placeholder:"Email",name:"userLogin",component:St,validate:[lt],id:"loginLogin"})),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"loginPassword"},"\u041f\u0430\u0440\u043e\u043b\u044c"),r.a.createElement(ot.a,{type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",name:"password",component:St,validate:[lt],width:"250px",id:"loginPassword"})),r.a.createElement("div",null,r.a.createElement(ot.a,{type:"checkbox",name:"rememberMe",id:"rememberMe",component:St}),r.a.createElement("label",{htmlFor:"rememberMe"},"\u0417\u0430\u043f\u043e\u043c\u043d\u0438\u0442\u044c \u043c\u0435\u043d\u044f")),r.a.createElement("div",null,n&&r.a.createElement("img",{src:n,alt:"captcha"}),n&&r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{htmlFor:"loginCaptcha"},"\u041a\u0430\u043f\u0447\u0430"),r.a.createElement(ot.a,{type:"text",placeholder:"\u041a\u0430\u043f\u0447\u0430",name:"captcha",component:St,validate:[lt],id:"loginCaptcha"}))),a?r.a.createElement("div",{style:{color:"red"}},a):null,r.a.createElement("div",null,r.a.createElement(Ce,{type:"submit",width:"100px"},"\u0412\u043e\u0439\u0442\u0438"),r.a.createElement(Ce,{type:"button",margin:"0 0 0 10px",onClick:s},"\u0412\u043e\u0439\u0442\u0438 \u043f\u043e\u0434 \u0442\u0435\u0441\u0442\u043e\u0432\u044b\u043c \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u043e\u043c")))})),kt=Object(o.b)((function(e){return{isAuth:e.auth.isAuth,captchaUrl:e.auth.captchaUrl}}),{login:function(e,t,a,n){return function(r){var s;return w.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,w.a.awrap(F(e,t,a,n));case 2:if(0!==(s=c.sent).resultCode){c.next=7;break}r(It()).then((function(){r(ft())})),c.next=11;break;case 7:if(10!==s.resultCode){c.next=10;break}return c.next=10,w.a.awrap(r(yt()));case 10:r(Object(it.a)("login",{_error:s.messages[0]}));case 11:case"end":return c.stop()}}))}}})((function(e){var t=e.login,a=e.isAuth,n=e.captchaUrl;return a?r.a.createElement($.a,{to:"/profile"}):r.a.createElement("div",null,r.a.createElement("h1",null,"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"),r.a.createElement(jt,{initialValues:{rememberMe:!0},logTestAccount:function(){t("free@samuraijs.com","free",!0,"")},captchaUrl:n,onSubmit:function(e){var a=e.userLogin,n=e.password,r=e.rememberMe,s=e.captcha;t(a,n,r,s)}}))})),Ft="samurai-network/profile/ADD_POST",Mt="samurai-network/profile/SET_USER_PROFILE",Tt="samurai-network/profile/SET_STATUS",Ut="samurai-network/profile/SET_PROFILE_PHOTO",Lt="samurai-network/profile/SET_AVATAR_FETCHING",Gt={posts:[{id:1,text:"\u0412\u0430\u043c \u043d\u0440\u0430\u0432\u0438\u0442\u0441\u044f React?",likes:4},{id:2,text:"hey",likes:2}],profile:null,status:"",avatarIsFetching:!1};var Rt=function(e){return{type:Ft,text:e.newPost}},Bt=function(e){return{type:Mt,profile:e}},zt=function(e){return{type:Tt,status:e}},Ht=function(e){return{type:Lt,isFetching:e}},Wt=function(e){return function(t){var a;return w.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e){n.next=6;break}return t(Bt(null)),n.next=4,w.a.awrap(D(e));case 4:a=n.sent,t(Bt(a));case 6:case"end":return n.stop()}}))}},Jt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ft:var a={id:e.posts[e.posts.length-1].id+1,text:t.text,likes:0};return Object(N.a)({},e,{posts:[].concat(Object(ne.a)(e.posts),[a])});case Mt:return Object(N.a)({},e,{profile:t.profile});case Tt:return Object(N.a)({},e,{status:t.status});case Ut:return Object(N.a)({},e,{profile:Object(N.a)({},e.profile,{photos:t.photos})});case Lt:return Object(N.a)({},e,{avatarIsFetching:t.isFetching});default:return e}},Kt=a(44),Zt=a.n(Kt),qt=a(73),Vt=a.n(qt);var Xt,Yt=function(e){return r.a.createElement("div",{className:Vt.a.post},r.a.createElement("div",null,r.a.createElement("img",{className:Vt.a.avatar,src:"https://miro.medium.com/max/480/1*5LGjgBL2kWpog3AodB569A.jpeg",alt:""})),r.a.createElement("div",{className:Vt.a.message},r.a.createElement("div",null,e.text),r.a.createElement("div",null,e.likes,"\u2665")))},Qt=a(100),$t=a.n(Qt),ea=function(e){var t=e.width,a=e.margin,n=e.placeholder,s=e.rows,c=void 0===s?1:s,o=e.cols,u=e.meta,l=e.input,i=e.id,m=u.error&&u.touched;return r.a.createElement("span",null,r.a.createElement("textarea",Object.assign({},l,{rows:c,cols:o,style:{width:t,margin:a},className:$t.a.textarea,placeholder:n,id:i})),m&&r.a.createElement("span",{className:m?$t.a.error:null},u.error))},ta=(Xt=10,function(e){if(e.length>Xt)return"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u0430 - ".concat(Xt)});var aa=Object(ut.a)({form:"profileAddNewPost"})((function(e){return r.a.createElement("form",{onSubmit:e.handleSubmit},r.a.createElement("div",null,r.a.createElement(ot.a,{className:Zt.a.textarea,name:"newPost",component:ea,placeholder:"\u0427\u0442\u043e \u0443 \u0432\u0430\u0441 \u043d\u043e\u0432\u043e\u0433\u043e?",validate:[lt,ta],width:"100%",rows:2,margin:"10px 0 0 0"})),r.a.createElement("div",null,r.a.createElement(Ce,{margin:"10px 0 0 0",className:Zt.a.button},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c")))}));var na=function(e){var t=e.state.profilePage.posts.map((function(e){return r.a.createElement(Yt,{key:e.id,text:e.text,likes:e.likes})})).reverse();return r.a.createElement("div",{className:Zt.a.posts},r.a.createElement("h2",{className:Zt.a.title},"\u041f\u043e\u0441\u0442\u044b"),r.a.createElement(aa,{onSubmit:function(t){e.addPost(t)}}),r.a.createElement("div",{className:Zt.a.postsList},t))};var ra=Object(o.b)((function(e){return{state:e}}),(function(e){return{addPost:function(t){e(Rt(t))}}}))(na),sa=a(35),ca=a.n(sa);var oa=function(e){var t=e.isOwner,a=e.savePhoto,n=e.profile,s=e.setAvatarIsFetching,c=e.avatarIsFetching,o=r.a.createRef();return r.a.createElement("div",{className:ca.a.avatar},r.a.createElement("div",{className:ca.a.avatarWrapper},c?r.a.createElement(Ve,null):r.a.createElement("img",{className:ca.a.avatarIMG,src:n.photos.large||He.a,alt:"avatar"})),t&&r.a.createElement("div",{className:ca.a.upload},r.a.createElement("input",{className:ca.a.uploadInput,onChange:function(e){if(e.target.files.length){var t=e.target.files[0];o.current.textContent=t.name,s(!0),a(t)}},type:"file",id:"UserPhotoUpload"}),r.a.createElement("label",{ref:o,className:ca.a.uploadLabel,htmlFor:"UserPhotoUpload"},"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u044e")))},ua=a(101),la=a.n(ua),ia=a(36),ma=a.n(ia),pa=function(e){var t=e.status,a=e.updateStatus,s=e.isOwner,c=Object(n.useState)(!1),o=Object(ae.a)(c,2),u=o[0],l=o[1],i=Object(n.useState)(t),m=Object(ae.a)(i,2),p=m[0],f=m[1];Object(n.useEffect)((function(){f(t)}),[t]);var d=(t?ma.a.statusExist:ma.a.statusNotExist)+" "+ma.a.status;return r.a.createElement("div",{className:ma.a.statusBox},u?r.a.createElement("input",{autoFocus:!0,onChange:function(e){f(e.currentTarget.value)},onBlur:function(){l(!1),a(p)},onFocus:function(e){e.currentTarget.select()},type:"text",value:p,className:ma.a.statusInput}):s&&r.a.createElement("button",{className:d,onClick:function(){l(!0)}},t||"\u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0442\u0430\u0442\u0443\u0441")||r.a.createElement("div",{className:ma.a.statusNotMe},t))},fa=a(54),da=a.n(fa);var ga=Object(ut.a)({form:"edit-profile"})((function(e){var t=e.handleSubmit,a=e.error,n=e.profile,s=e.setEditMode;return r.a.createElement("form",{onSubmit:t,className:da.a.form},a&&r.a.createElement("div",{className:da.a.error},a),r.a.createElement("h3",null,"\u041e\u0441\u043d\u043e\u0432\u043d\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f"),r.a.createElement("div",{className:da.a.aboutMe},r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"dataFormName"},"\u0424\u0418\u041e:"),r.a.createElement(ot.a,{type:"text",width:"300px",placeholder:"\u0418\u043c\u044f",name:"fullName",component:St,validate:[lt],id:"dataFormName"})),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"dataFormWork"},"\u0418\u0449\u0438\u0442\u0435 \u0440\u0430\u0431\u043e\u0442\u0443:"),r.a.createElement(ot.a,{type:"checkbox",name:"lookingForAJob",component:St,id:"dataFormWork"})),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"dataFormSkills"},"\u0412\u0430\u0448\u0438 \u043d\u0430\u0432\u044b\u043a\u0438:"),r.a.createElement(ot.a,{rows:2,width:"300px",name:"lookingForAJobDescription",component:ea,validate:[lt],id:"dataFormSkills"})),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"dataFormAbout"},"\u041e \u0412\u0430\u0441:"),r.a.createElement(ot.a,{rows:2,width:"300px",name:"aboutMe",component:ea,validate:[lt],id:"dataFormAbout"}))),r.a.createElement("hr",null),r.a.createElement("h3",null,"\u0412\u0430\u0448\u0438 \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u044b"),r.a.createElement("div",{className:da.a.myContacts},Object.keys(n.contacts).map((function(e){return r.a.createElement("div",{key:e},r.a.createElement("label",{htmlFor:"dataForm"+e},e[0].toUpperCase()+e.slice(1),":"),r.a.createElement(ot.a,{type:"text",width:"300px",name:"contacts."+e,component:St,id:"dataForm"+e}))}))),r.a.createElement(Ce,null,"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),r.a.createElement(Ce,{type:"button",margin:"0 0 0 10px",onClick:function(){s(!1)}},"\u041e\u0442\u043c\u0435\u043d\u0430"))})),va=a(74),Ea=a.n(va);var _a=function(e){var t=e.profile,a=Object.values(t.contacts).some((function(e){return null!==e}));return r.a.createElement("dl",{className:Ea.a.about},r.a.createElement("div",null,r.a.createElement("dt",null,"\u0418\u0449\u0443 \u0440\u0430\u0431\u043e\u0442\u0443:"),r.a.createElement("dd",null," ",t.lookingForAJob?"\u0434\u0430":"\u043d\u0435\u0442")),r.a.createElement("div",null,r.a.createElement("dt",null,"\u041c\u043e\u0438 \u043d\u0430\u0432\u044b\u043a\u0438:"),r.a.createElement("dd",null," ",t.lookingForAJobDescription||"\u043d\u0435\u0442\u0443")),r.a.createElement("div",null,r.a.createElement("dt",null,"\u041e\u0431\u043e \u043c\u043d\u0435:"),r.a.createElement("dd",null," ",t.aboutMe||"\u043d\u0435 \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e")),a&&r.a.createElement("hr",null),a&&r.a.createElement("div",{className:Ea.a.contacts},r.a.createElement("dt",null,"\u041c\u043e\u0438 \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u044b:"),r.a.createElement("dd",null,r.a.createElement("dl",{className:Ea.a.contactsList},Object.entries(t.contacts).map((function(e){var a=e[0];return e[1]?r.a.createElement("div",{key:a},r.a.createElement("dt",null,a,":"),r.a.createElement("dd",null,r.a.createElement("a",{rel:"noopener noreferrer",target:"_blank",href:t.contacts[a]},t.contacts[a]))):null}))))))};var ha=function(e){var t=e.profile,a=e.status,s=e.isOwner,c=e.saveProfile,o=e.updateStatus,u=Object(n.useState)(!1),l=Object(ae.a)(u,2),i=l[0],m=l[1];return r.a.createElement("div",{className:la.a.info},r.a.createElement("div",null,r.a.createElement("h1",{className:la.a.userName},t.fullName),r.a.createElement(pa,{status:a,updateStatus:o,isOwner:s}),(a||s)&&r.a.createElement("hr",null),i?r.a.createElement(ga,{setEditMode:m,profile:t,initialValues:t,onSubmit:function(e){c(e).then((function(){m(!1)})).catch((function(){}))}}):r.a.createElement(_a,{isOwner:s,profile:t})),s&&!i&&r.a.createElement("div",null,r.a.createElement(Ce,{onClick:function(){m(!0)}},"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c")),!s&&r.a.createElement(g.b,{to:"/messages/".concat(t.userId)},r.a.createElement(Ce,null,"\u041d\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435")))};var wa=function(e){var t=e.profile,a=e.savePhoto,n=e.status,s=e.updateStatus,c=e.isOwner,o=e.saveProfile,u=e.avatarIsFetching,l=e.setAvatarIsFetching;return t?r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(oa,{savePhoto:a,profile:t,isOwner:c,avatarIsFetching:u,setAvatarIsFetching:l}),r.a.createElement(ha,{status:n,updateStatus:s,saveProfile:o,profile:t,isOwner:c})):r.a.createElement(Ve,null)};var ba=Object(o.b)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,userID:e.auth.userId,avatarIsFetching:e.profilePage.avatarIsFetching,myProfile:e.auth.myProfile,isAuth:e.auth.isAuth}}),{getUsersProfile:Wt,getStatus:function(e){return function(t){var a;return w.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,w.a.awrap(S(e));case 2:a=n.sent,t(zt(a));case 4:case"end":return n.stop()}}))}},updateStatus:function(e){return function(t){return w.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,w.a.awrap(C(e));case 2:0===a.sent.resultCode&&t(zt(e));case 4:case"end":return a.stop()}}))}},savePhoto:function(e){return function(t){var a;return w.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,w.a.awrap(A(e));case 2:0===(a=n.sent).resultCode&&(t((r=a.data.photos,{type:Ut,photos:r})),t(xt(a.data.photos)),t(Ht(!1)));case 4:case"end":return n.stop()}var r}))}},saveProfile:function(e){return function(t,a){var n;return w.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,w.a.awrap(j(e));case 2:if(0!==(n=r.sent).resultCode){r.next=8;break}return r.next=6,w.a.awrap(t(Wt(a().auth.userId)));case 6:r.next=10;break;case 8:return t(Object(it.a)("edit-profile",{_error:n.messages[0]})),r.abrupt("return",Promise.reject());case 10:case"end":return r.stop()}}))}},setAvatarIsFetching:Ht,saveMyProfile:function(e){return function(t){var a;return w.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,w.a.awrap(j(e));case 2:if(0!==(a=n.sent).resultCode){n.next=8;break}return n.next=6,w.a.awrap(t(Nt(e)));case 6:n.next=10;break;case 8:return t(Object(it.a)("edit-profile",{_error:a.messages[0]})),n.abrupt("return",Promise.reject());case 10:case"end":return n.stop()}}))}}})((function(e){var t=e.savePhoto,a=e.profile,s=e.status,c=e.updateStatus,o=e.saveProfile,u=e.userID,l=e.getUsersProfile,i=e.getStatus,m=e.avatarIsFetching,p=e.setAvatarIsFetching,f=e.myProfile,d=e.saveMyProfile,g=e.isAuth,v=Object($.g)().userID,E=v?+v:u,_=u===E;return Object(n.useEffect)((function(){E&&(l(E),i(E))}),[E,l,i]),g?r.a.createElement(r.a.Fragment,null,r.a.createElement(wa,{savePhoto:t,profile:_?f:a,status:s,updateStatus:c,isOwner:_,saveProfile:_?d:o,avatarIsFetching:m,setAvatarIsFetching:p}),r.a.createElement(ra,null)):r.a.createElement($.a,{to:"/login"})})),Na=a(149),xa=a.n(Na),Ia=a(150),ya=a.n(Ia),Pa=a(27),Oa=a.n(Pa),Da=function(e){var t=e.id,a=e.userName,s=e.hasNewMessages,c=e.lastDialogActivityDate,o=(e.lastUserActivityDate,e.newMessagesCount),u=e.photos,l=Object(n.useState)(!1),i=Object(ae.a)(l,2),m=i[0],p=i[1];return Object(n.useEffect)((function(){var e=new Date,t=e.setDate(e.getDate()+1),a=e.setDate(e.getDate()-1),n=new Date(c).getTime();p(a<n&&n<t)}),[c]),r.a.createElement("li",{className:Oa.a.li},r.a.createElement(g.b,{className:Oa.a.a,to:"/messages/".concat(t),activeClassName:Oa.a.active},r.a.createElement("img",{className:Oa.a.avatar,src:u.small||He.a,alt:"avatar"}),r.a.createElement("div",{className:Oa.a.info},r.a.createElement("div",{className:Oa.a.infoMessage},r.a.createElement("span",{className:Oa.a.userName},a),s&&r.a.createElement("span",null,o,r.a.createElement("span",{role:"img","aria-label":"\u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435"},"\ud83d\udcac"))),r.a.createElement("div",{className:Oa.a.lastMessage},m?new Date(c).toLocaleTimeString().slice(0,5):new Date(c).toLocaleDateString()))))},Sa=function(e){var t=e.interlocutors;return r.a.createElement("ul",{className:ya.a.ul},t.map((function(e){return r.a.createElement(Da,{key:e.id,id:e.id,userName:e.userName,hasNewMessages:e.hasNewMessages,lastDialogActivityDate:e.lastDialogActivityDate,lastUserActivityDate:e.lastUserActivityDate,newMessagesCount:e.newMessagesCount,photos:e.photos})})))},Ca=function(e){var t=e.interlocutors;return r.a.createElement("div",{className:xa.a.wrapper},t?r.a.createElement(Sa,{interlocutors:t}):r.a.createElement(Ve,null))},Aa=a(151),ja=a.n(Aa),ka=a(75),Fa=a.n(ka),Ma=function(){return r.a.createElement("div",{className:Fa.a.wrapper},r.a.createElement("div",{className:Fa.a.elem},r.a.createElement("div",{className:Fa.a.messagesIMG}),r.a.createElement("div",null,"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u043e\u0431\u0435\u0441\u0435\u0434\u043d\u0438\u043a\u0430")))},Ta=a(45),Ua=a.n(Ta),La=function(e){var t,a=e.interlocutor;return r.a.createElement("div",{className:Ua.a.wrapper},r.a.createElement("div",{className:Ua.a.info},r.a.createElement(g.b,{to:"/profile/".concat(a.id),className:Ua.a.userName},a.userName),a.lastUserActivityDate&&r.a.createElement("div",{className:Ua.a.online},"\u0411\u044b\u043b \u0432 \u0441\u0435\u0442\u0438 - ",new Date(a.lastUserActivityDate).toLocaleString())),r.a.createElement(g.b,{to:"/profile/".concat(a.id)},r.a.createElement("img",{className:Ua.a.avatar,src:(null===(t=a.photos)||void 0===t?void 0:t.small)?a.photos.small:He.a||He.a,alt:"avatar"})))},Ga=a(152),Ra=a.n(Ga),Ba=a(37),za=a.n(Ba),Ha=function(e){e.messageID;var t=e.message,a=(e.translatedMessage,e.addedAt),n=e.senderID,s=e.senderName,c=(e.recipientID,e.viewed,e.lastSenderID),o=e.interlocutorPhoto,u=e.myPhoto,l=e.myID,i=e.firstMessage,m=c!==n,p=n===l?u:o;return r.a.createElement("div",{className:za.a.wrapper,style:{marginTop:m?i?"0":"30px":"15px"}},m&&r.a.createElement(r.a.Fragment,null,r.a.createElement(g.b,{to:"/profile/".concat(n)},r.a.createElement("img",{className:za.a.avatar,src:p||void 0,alt:"avatar"})),r.a.createElement(g.b,{className:za.a.aName,to:"/profile/".concat(n)},r.a.createElement("span",{className:za.a.name},s)),r.a.createElement("span",{className:za.a.time},new Date(a).toLocaleTimeString().slice(0,5))),r.a.createElement("div",{className:za.a.message},t))},Wa=function(e){var t=e.dialog,a=e.myPhoto,n=e.interlocutorPhoto,s=e.myID,c=e.isFetching,o=[];if(t)for(var u=0,l=0;l<t.length;l++)o.push(r.a.createElement(Ha,{key:t[l].id,messageID:t[l].id,message:t[l].body,translatedMessage:t[l].translatedBody,addedAt:t[l].addedAt,senderID:t[l].senderId,senderName:t[l].senderName,recipientID:t[l].recipientId,viewed:t[l].viewed,lastSenderID:u,interlocutorPhoto:n,myPhoto:a,myID:s,firstMessage:0===l})),u=t[l].senderId;return r.a.createElement("div",{className:Ra.a.wrapper},c?r.a.createElement(Ve,null):o||r.a.createElement(Ve,null))},Ja=function(e){var t=e.currentDialog,a=e.interlocutor,n=e.userID,s=e.myPhoto,c=e.myID,o=e.isFetching,u=e.newInterlocutor,l=e.getNewInterlocutor,i=e.newInterlocutorFetching,m=e.interlocutorsFetching;if(!n)return r.a.createElement(Ma,null);a||i||m||l(n);var p={id:null,userName:null,lastUserActivityDate:null,photos:null};return!a&&u&&(p.id=u.userId,p.userName=u.fullName,p.photos=u.photos),a&&!u&&(p.id=a.id,p.userName=a.userName,p.lastUserActivityDate=a.lastUserActivityDate,p.photos=a.photos),a&&u&&(p.id=a.id,p.userName=a.userName,p.lastUserActivityDate=a.lastUserActivityDate,p.photos=a.photos),r.a.createElement("div",{className:ja.a.wrapper},r.a.createElement(La,{interlocutor:p}),t&&r.a.createElement(Wa,{myID:c,dialog:t,interlocutorPhoto:p.photos?p.photos.small:null,myPhoto:s,isFetching:o}))},Ka=a(153),Za=a.n(Ka);var qa=Object(o.b)((function(e){return{interlocutors:e.messagesPage.interlocutors,newInterlocutor:e.messagesPage.newInterlocutor,currentDialog:e.messagesPage.currentDialog,messagesAfterDate:e.messagesPage.messagesAfterDate,fetching:e.messagesPage.fetching,isAuth:e.auth.isAuth,myProfile:e.auth.myProfile}}),{startChatting:function(e){return function(){return w.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.a.awrap(U(e));case 2:case"end":return t.stop()}}))}},getInterlocutorsList:function(){return function(e){var t;return w.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return e(X("interlocutors",!0)),a.next=3,w.a.awrap(L());case 3:t=a.sent,e({type:H,messages:t}),e(X("interlocutors",!1));case 6:case"end":return a.stop()}}))}},getNewInterlocutor:function(e){return function(t){var a;return w.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t(X("newInterlocutor",!0)),n.next=3,w.a.awrap(D(e));case 3:a=n.sent,t({type:W,profile:a}),t(X("newInterlocutor",!1));case 6:case"end":return n.stop()}}))}},getDialog:function(e){return function(t){var a;return w.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t(X("currentDialog",!0)),n.next=3,w.a.awrap(G(e));case 3:(a=n.sent).error||(t((r=a.items,{type:J,currentDialog:r})),t(X("currentDialog",!1)));case 5:case"end":return n.stop()}var r}))}},getMessagesAfterDate:function(e,t){return function(a){var n;return w.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return a(X("messagesAfterDate",!0)),r.next=3,w.a.awrap(B(e,t));case 3:n=r.sent,a({type:K,messagesAfterDate:n}),a(X("messagesAfterDate",!1));case 6:case"end":return r.stop()}}))}},sendMessage:function(e,t){return function(){return w.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,w.a.awrap(R(e,t));case 2:case"end":return a.stop()}}))}}})((function(e){var t=e.interlocutors,a=e.newInterlocutor,s=e.getNewInterlocutor,c=e.currentDialog,o=(e.messagesAfterDate,e.fetching),u=(e.startChatting,e.getInterlocutorsList),l=e.getDialog,i=(e.sendMessage,e.getMessagesAfterDate,e.isAuth),m=e.myProfile,p=Object($.g)().userID,f=Object(n.useState)(null),d=Object(ae.a)(f,2),g=d[0],v=d[1];return Object(n.useEffect)((function(){u()}),[u]),Object(n.useEffect)((function(){p&&l(+p)}),[l,p]),Object(n.useEffect)((function(){p&&t&&v(t.find((function(e){return e.id===+p}))||null)}),[p,t]),i?r.a.createElement("div",{className:Za.a.messages},r.a.createElement(Ca,{interlocutors:t}),r.a.createElement(Ja,{userID:p?+p:null,interlocutor:g,currentDialog:c,myPhoto:m?m.photos.small:null,myID:m?m.userId:null,isFetching:o.currentDialog,newInterlocutor:a,newInterlocutorFetching:o.newInterlocutor,getNewInterlocutor:s,interlocutorsFetching:o.interlocutors})):r.a.createElement($.a,{to:"/login"})}));var Va=function(){return r.a.createElement("div",{className:te.a.content},r.a.createElement($.d,null,r.a.createElement($.b,{exact:!0,path:"/",render:function(){return r.a.createElement($.a,{to:"/profile"})}}),r.a.createElement($.b,{path:"/profile/:userID?",render:function(){return r.a.createElement(ba,null)}}),r.a.createElement($.b,{path:"/messages/:userID?",render:function(){return r.a.createElement(qa,null)}}),r.a.createElement($.b,{path:"/users",render:function(){return r.a.createElement(Ye,null)}}),r.a.createElement($.b,{path:"/news",component:et}),r.a.createElement($.b,{path:"/music",component:nt}),r.a.createElement($.b,{path:"/settings",component:ct}),r.a.createElement($.b,{path:"/login",render:function(){return r.a.createElement(kt,null)}}),r.a.createElement($.b,{path:"*",render:function(){return"404"}})))},Xa=a(38),Ya=a.n(Xa),Qa=Object(o.b)((function(e){return{isAuth:e.auth.isAuth,myProfile:e.auth.myProfile}}),{logout:function(){return function(e){return w.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.a.awrap(M());case 2:0===t.sent.resultCode&&e(wt(null,null,null,!1));case 4:case"end":return t.stop()}}))}}})((function(e){var t=e.isAuth,a=e.logout,n=e.myProfile;return r.a.createElement("header",{className:Ya.a.header},r.a.createElement("div",{className:Ya.a.container},r.a.createElement("div",null,"Samurai-Network"),t&&n&&n.photos.small?r.a.createElement("div",{className:Ya.a.infoMe},r.a.createElement(g.b,{to:"/profile",className:Ya.a.userName},r.a.createElement("span",null,n.fullName.split(" ")[0])),r.a.createElement(g.b,{to:"/profile",className:Ya.a.avatar},r.a.createElement("img",{src:n.photos.small,alt:"avatar"})),r.a.createElement(Ce,{onClick:a},"\u0412\u044b\u0439\u0442\u0438")):r.a.createElement(g.b,{to:"/login",className:Ya.a.login},r.a.createElement(Ce,null,"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f"))))}));var $a=Object(o.b)((function(e){return{initialized:e.init.initialized}}),{initializeApp:function(){return function(e){return w.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:e(It()).then((function(){e(ft()).then((function(){e({type:mt})}))}));case 1:case"end":return t.stop()}}))}}})((function(e){var t=e.initializeApp,a=e.initialized;return Object(n.useEffect)((function(){t()}),[t]),a?r.a.createElement(g.a,null,r.a.createElement("div",{className:l.a.page},r.a.createElement(Qa,null),r.a.createElement("main",{className:l.a.main},r.a.createElement(Q,null),r.a.createElement(Va,null)),r.a.createElement(p,null))):r.a.createElement(Ve,{fullscreen:!0})})),en=a(154),tn=a(134),an=Object(ye.c)({profilePage:Jt,messagesPage:Y,usersPage:Ee,auth:Pt,init:dt,form:tn.a}),nn=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ye.d,rn=Object(ye.e)(an,nn(Object(ye.a)(en.a)));c.a.render(r.a.createElement(o.a,{store:rn},r.a.createElement($a,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},35:function(e,t,a){e.exports={avatar:"Avatar_avatar__212y-",avatarIMG:"Avatar_avatarIMG__1-LTa",upload:"Avatar_upload__3w34x",uploadInput:"Avatar_uploadInput__3u7cW",uploadLabel:"Avatar_uploadLabel__2Exb6"}},36:function(e,t,a){e.exports={statusBox:"Status_statusBox__3qS3R",status:"Status_status__1ZDrO",statusNotExist:"Status_statusNotExist__2Ayt_",statusExist:"Status_statusExist__2EA9K",statusInput:"Status_statusInput__2o4UG",statusNotMe:"Status_statusNotMe__22woT"}},37:function(e,t,a){e.exports={wrapper:"DialogMessagesItem_wrapper__D7RSz",avatar:"DialogMessagesItem_avatar__kICSw",name:"DialogMessagesItem_name__5Xel9",time:"DialogMessagesItem_time__1OJ-S",aName:"DialogMessagesItem_aName__q09QC"}},38:function(e,t,a){e.exports={header:"Header_header__2CR8J",container:"Header_container__HDvgl",userName:"Header_userName__3dpGW",avatar:"Header_avatar__34Ghc",infoMe:"Header_infoMe__UMQTd"}},44:function(e,t,a){e.exports={posts:"Posts_posts__epRJ6",title:"Posts_title__3oTfI",textarea:"Posts_textarea__1CXXA",button:"Posts_button__3XZT1",postsList:"Posts_postsList__3exEI"}},45:function(e,t,a){e.exports={wrapper:"InterlocutorInfo_wrapper__1YcGt",info:"InterlocutorInfo_info__11Ihl",avatar:"InterlocutorInfo_avatar__1YtOI",userName:"InterlocutorInfo_userName__2BFJg",online:"InterlocutorInfo_online__2G9Er"}},53:function(e,t,a){e.exports={preloaderIMG:"Preloader_preloaderIMG__BZHNf",wrapper:"Preloader_wrapper__1pJ8g",preloader:"Preloader_preloader__oGcz1"}},54:function(e,t,a){e.exports={form:"ProfileDataForm_form__2KiwA",myContacts:"ProfileDataForm_myContacts__3GBy1",aboutMe:"ProfileDataForm_aboutMe__2_Y6I",error:"ProfileDataForm_error__1DhlD"}},70:function(e,t,a){e.exports={div:"Search_div__2HjV8",input:"Search_input__1SF7g",button:"Search_button__tmFR-",reset:"Search_reset__2G7ng"}},71:function(e,t,a){e.exports={paginationItems:"Paginator_paginationItems__2iECZ",button:"Paginator_button__1_Jp0"}},73:function(e,t,a){e.exports={post:"Post_post__lASZN",avatar:"Post_avatar__3eC36",message:"Post_message__3tS2K"}},74:function(e,t,a){e.exports={contactsList:"ProfileData_contactsList__ZEb2E",about:"ProfileData_about__2NVys",contacts:"ProfileData_contacts__KLq0S"}},75:function(e,t,a){e.exports={wrapper:"SelectInterlocutor_wrapper__1dg4h",elem:"SelectInterlocutor_elem__QCwpf",messagesIMG:"SelectInterlocutor_messagesIMG__eC6TV"}},93:function(e,t,a){e.exports={page:"App_page__4Klr-",main:"App_main__1nCkj"}},95:function(e,t,a){e.exports={paginationItem:"PaginationItem_paginationItem__1EdWb",paginationItemActive:"PaginationItem_paginationItemActive__1EfE6"}},96:function(e,t,a){e.exports=a.p+"static/media/preloader.584b607f.gif"},97:function(e,t,a){e.exports={input:"Input_input__3Rg3-",error:"Input_error__36SvP"}}},[[180,1,2]]]);
//# sourceMappingURL=main.a65b8b0c.chunk.js.map