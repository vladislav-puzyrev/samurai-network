(this["webpackJsonpsamurai-network"]=this["webpackJsonpsamurai-network"]||[]).push([[0],{12:function(e,t,a){e.exports={menu:"Menu_menu__27qdF",menuLink:"Menu_menuLink__EHAtu",active:"Menu_active__2D1vX"}},130:function(e,t,a){e.exports={footer:"Footer_footer__3hmYT"}},131:function(e,t,a){e.exports={aside:"Sidebar_aside__1e2NK"}},133:function(e,t,a){e.exports={content:"Main_content__2h5Jj"}},136:function(e,t,a){e.exports={button:"Button_button__OZeNM"}},137:function(e,t,a){e.exports={users:"UsersList_users__WQVOf"}},138:function(e,t,a){},139:function(e,t,a){},140:function(e,t,a){},142:function(e,t,a){e.exports={error:"FormsControls_error__JuxJL"}},144:function(e,t,a){e.exports={dialog:"Dialog_dialog__PhsES"}},148:function(e,t,a){e.exports={input:"Input_input__3Rg3-"}},149:function(e,t,a){e.exports={textarea:"Textarea_textarea__32chH"}},178:function(e,t,a){e.exports=a(305)},183:function(e,t,a){},25:function(e,t,a){e.exports={user:"User_user__3Qdic",avatarBox:"User_avatarBox__dLefj",info:"User_info__3dI-o",userName:"User_userName__1AQPc",followButton:"User_followButton__y-S0x",sendMessage:"User_sendMessage__39BmE",userStatus:"User_userStatus__1tTcC"}},305:function(e,t,a){"use strict";a.r(t);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var n=a(0),r=a.n(n),s=a(60),c=a.n(s),o=(a(183),a(11)),u=a(89),l=a.n(u),i=a(130),m=a.n(i);var f=function(){return r.a.createElement("footer",{className:m.a.footer},"samurai-network")},p=a(131),d=a.n(p),v=a(10),E=a(12),g=a.n(E);var _=function(){return r.a.createElement("ul",{className:g.a.menu},r.a.createElement("li",{className:g.a.menuItem},r.a.createElement(v.b,{exact:!0,to:"/profile",className:g.a.menuLink,activeClassName:g.a.active},"\u041c\u043e\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430")),r.a.createElement("li",{className:g.a.menuItem},r.a.createElement(v.b,{to:"/messages",className:g.a.menuLink,activeClassName:g.a.active},"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f")),r.a.createElement("li",{className:g.a.menuItem},r.a.createElement(v.b,{to:"/users",className:g.a.menuLink,activeClassName:g.a.active},"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438")),r.a.createElement("li",{className:g.a.menuItem},r.a.createElement(v.b,{to:"/news",className:g.a.menuLink,activeClassName:g.a.active},"\u041d\u043e\u0432\u043e\u0441\u0442\u0438")),r.a.createElement("li",{className:g.a.menuItem},r.a.createElement(v.b,{to:"/music",className:g.a.menuLink,activeClassName:g.a.active},"\u041c\u0443\u0437\u044b\u043a\u0430")),r.a.createElement("li",{className:g.a.menuItem},r.a.createElement(v.b,{to:"/settings",className:g.a.menuLink,activeClassName:g.a.active},"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438")))};var h=function(){return r.a.createElement("aside",{className:d.a.aside},r.a.createElement(_,null))},b=a(30),w=a(133),x=a.n(w),N=a(24),O=a(1),P=a.n(O),y=a(40),I=a(9),S=a(134),k=a.n(S).a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"ca3b0eb4-4af6-4803-8caa-f7d26464a12c"}}),j=function(e,t){var a,n,r=arguments;return P.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return a=r.length>2&&void 0!==r[2]?r[2]:"",s.next=3,P.a.awrap(k.get("users?count=".concat(e,"&page=").concat(t,"&term=").concat(a)));case 3:return n=s.sent,s.abrupt("return",n.data);case 5:case"end":return s.stop()}}))},C=function(e){var t;return P.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,P.a.awrap(k.post("follow/".concat(e)));case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}))},A=function(e){var t;return P.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,P.a.awrap(k.delete("follow/".concat(e)));case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}))},F=function(e){var t;return P.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,P.a.awrap(k.get("profile/".concat(e)));case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}))},U=function(e){var t;return P.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,P.a.awrap(k.get("profile/status/".concat(e)));case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}))},T=function(e){var t;return P.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,P.a.awrap(k.put("profile/status",{status:e}));case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}))},L=function(e){var t,a;return P.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return(t=new FormData).append("image",e),n.next=4,P.a.awrap(k.put("profile/photo",t,{headers:{"Content-Type":"multipart/form-data"}}));case 4:return a=n.sent,n.abrupt("return",a.data);case 6:case"end":return n.stop()}}))},M=function(e){var t;return P.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,P.a.awrap(k.put("profile",e));case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}))},D=function(){var e;return P.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P.a.awrap(k.get("auth/me"));case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}))},R=function(e,t){var a,n,r,s=arguments;return P.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return a=!(s.length>2&&void 0!==s[2])||s[2],n=s.length>3?s[3]:void 0,c.next=4,P.a.awrap(k.post("auth/login",{email:e,password:t,rememberMe:a,captcha:n}));case 4:return r=c.sent,c.abrupt("return",r.data);case 6:case"end":return c.stop()}}))},G=function(){var e;return P.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P.a.awrap(k.post("auth/logout"));case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}))},B=function(){var e;return P.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P.a.awrap(k.get("security/get-captcha-url"));case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}))},H="samurai-network/users/FOLLOW",z="samurai-network/users/UNFOLLOW",J="samurai-network/users/SET_USERS",W="samurai-network/users/SET_CURRENT_PAGE",Z="samurai-network/users/SET_TOTAL_USERS_COUNT",V="samurai-network/users/TOGGLE_IS_FETCHING",q="samurai-network/users/TOGGLE_IS_FOLLOWING_PROGRESS",K="samurai-network/users/SET_TERM",X={users:[],totalUsersCount:0,currentPage:1,isFetching:!1,followingInProgress:[],term:""};var Q=function(e){return{type:J,users:e}},Y=function(e){return{type:Z,totalUsersCount:e}},$=function(e){return{type:V,isFetching:e}},ee=function(e,t){return{type:q,isFetching:e,userId:t}},te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case H:return Object(I.a)({},e,{users:e.users.map((function(e){return e.id===t.id?Object(I.a)({},e,{followed:!0}):e}))});case z:return Object(I.a)({},e,{users:e.users.map((function(e){return e.id===t.id?Object(I.a)({},e,{followed:!1}):e}))});case J:return Object(I.a)({},e,{users:t.users});case W:return Object(I.a)({},e,{currentPage:t.currentPage});case Z:return Object(I.a)({},e,{totalUsersCount:t.totalUsersCount});case V:return Object(I.a)({},e,{isFetching:t.isFetching});case q:return Object(I.a)({},e,{followingInProgress:t.isFetching?[].concat(Object(y.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!==t.userId}))});case K:return Object(I.a)({},e,{term:t.term});default:return e}},ae=a(135),ne=function(e){return e.usersPage.users},re=Object(ae.a)(ne,(function(e){return e.filter((function(){return!0}))})),se=function(e){return e.usersPage.totalUsersCount},ce=function(e){return e.usersPage.currentPage},oe=function(e){return e.usersPage.isFetching},ue=function(e){return e.usersPage.followingInProgress},le=a(8),ie=a(66),me=a.n(ie),fe=a(136),pe=a.n(fe),de=function(e){var t=e.width,a=e.children,n=e.onClick,s=e.margin;return r.a.createElement("button",{onClick:n,style:{width:t,margin:s},className:pe.a.button},a)},ve=r.a.memo((function(e){var t=e.setTerm,a=e.setCurrentPage,s=e.setPortionNumber,c=Object(n.useState)(""),o=Object(N.a)(c,2),u=o[0],l=o[1],i={cursor:u?"pointer":"not-allowed"};return r.a.createElement("div",{className:me.a.div},r.a.createElement("input",{placeholder:"\u041f\u043e\u0438\u0441\u043a",type:"text",onChange:function(e){l(e.target.value)},className:me.a.input,value:u}),r.a.createElement("button",{disabled:!u,style:i,onClick:function(){a(1),t(u),s(1)},className:me.a.button},"\u041d\u0430\u0439\u0442\u0438"),r.a.createElement(de,{margin:"0 0 0 10px",onClick:function(){a(1),t(""),l(""),s(1)}},"\u0421\u0431\u0440\u043e\u0441"))})),Ee=a(67),ge=a.n(Ee),_e=a(91),he=a.n(_e),be=function(e){var t=e.active,a=e.number,n=t?he.a.paginationItemActive:"";return r.a.createElement("li",{className:he.a.paginationItem+" "+n,"data-number":a},a)},we=r.a.memo((function(e){var t=e.setCurrentPage,a=e.currentPage,s=e.totalUsersCount,c=e.pageSize,o=e.portionSize,u=e.getRequestUsers,l=e.term,i=e.portionNumber,m=e.setPortionNumber;Object(n.useEffect)((function(){u(c,a,l)}),[u,c,a,l]);for(var f=Math.ceil(s/c),p=[],d=1;d<s;d++)p.push(d);var v=Math.ceil(f/o),E=f/o*o,g=(i-1)*o+1,_=i*o;return r.a.createElement("div",{onClick:function(e){var a=+e.target.dataset.number;a&&function(e){u(c,e,l),t(e)}(a)},className:ge.a.paginationItems},s>0&&r.a.createElement("button",{disabled:1===i,className:ge.a.button,onClick:function(){m(i-1)}},"\u0412\u043b\u0435\u0432\u043e"),p.filter((function(e){return e>=g&&e<=_&&e<=E})).map((function(e){return r.a.createElement(be,{key:e,number:e,active:+a===e})})),s>0&&r.a.createElement("button",{disabled:v===i,className:ge.a.button,onClick:function(){m(i+1)}},"\u0412\u043f\u0440\u0430\u0432\u043e"))})),xe=a(137),Ne=a.n(xe),Oe=a(25),Pe=a.n(Oe),ye=a(63),Ie=a.n(ye);var Se=function(e){var t=e.user,a=e.followButtonDisabled,n=e.unfollow,s=e.follow;return r.a.createElement("li",{className:Pe.a.user},r.a.createElement("div",{className:Pe.a.avatarBox},r.a.createElement(v.b,{to:"/profile/".concat(t.id)},r.a.createElement("img",{src:t.photos.small||Ie.a,alt:"avatar"}))),r.a.createElement("div",{className:Pe.a.info},r.a.createElement(v.b,{className:Pe.a.userName,to:"/profile/".concat(t.id)},t.name),t.status&&r.a.createElement("span",{className:Pe.a.userStatus},t.status),t.followed?r.a.createElement("button",{className:Pe.a.followButton,disabled:a,onClick:function(){n(t.id)}},"\u041e\u0442\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f ",r.a.createElement("span",{"aria-label":"\u041e\u0442\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f",role:"img"},"\u274c")):r.a.createElement("button",{className:Pe.a.followButton,disabled:a,onClick:function(){s(t.id)}},"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f ",r.a.createElement("span",{"aria-label":"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f",role:"img"},"\u2705")),r.a.createElement(v.b,{to:"/messages/".concat(t.id),className:Pe.a.sendMessage},"\u041d\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435")))},ke=a(50),je=a.n(ke),Ce=a(92),Ae=a.n(Ce),Fe=function(e){var t=e.fullscreen;return void 0!==t&&t?r.a.createElement("div",{className:je.a.wrapper},r.a.createElement("div",{className:je.a.preloader},r.a.createElement("img",{className:je.a.preloaderIMG,src:Ae.a,alt:"load"}))):r.a.createElement("img",{className:je.a.preloaderIMG,src:Ae.a,alt:"load"})},Ue=r.a.memo((function(e){var t=e.users,a=e.followingInProgress,n=e.follow,s=e.unfollow,c=e.isFetching,o=t.length?t.map((function(e){return r.a.createElement(Se,{key:e.id,user:e,followButtonDisabled:a.some((function(t){return t===e.id})),follow:n,unfollow:s})})):"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e";return c?r.a.createElement(Fe,null):r.a.createElement("ul",{className:Ne.a.users},o)}));var Te=Object(le.d)(Object(o.b)((function(e){return{users:re(e),totalUsersCount:se(e),currentPage:ce(e),isFetching:oe(e),followingInProgress:ue(e),term:e.usersPage.term}}),{setCurrentPage:function(e){return{type:W,currentPage:e}},setIsFetching:$,getRequestUsers:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return function(n){var r;return P.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return n($(!0)),s.next=3,P.a.awrap(j(e,t,a));case 3:r=s.sent,n(Q(r.items)),n(Y(r.totalCount)),n($(!1));case 7:case"end":return s.stop()}}))}},follow:function(e){return function(t){return P.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t(ee(!0,e)),a.next=3,P.a.awrap(C(e));case 3:0===a.sent.resultCode&&t({type:H,id:e}),t(ee(!1,e));case 6:case"end":return a.stop()}}))}},unfollow:function(e){return function(t){return P.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t(ee(!0,e)),a.next=3,P.a.awrap(A(e));case 3:0===a.sent.resultCode&&t({type:z,id:e}),t(ee(!1,e));case 6:case"end":return a.stop()}}))}},setTerm:function(e){return{type:K,term:e}}}))((function(e){var t=e.currentPage,a=e.totalUsersCount,s=e.isFetching,c=e.users,o=e.followingInProgress,u=e.setCurrentPage,l=e.follow,i=e.unfollow,m=e.setTerm,f=e.getRequestUsers,p=e.term;Object(n.useEffect)((function(){return function(){u(1)}}),[u]);var d=Object(n.useState)(1),v=Object(N.a)(d,2),E=v[0],g=v[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438"),r.a.createElement(ve,{setTerm:m,setCurrentPage:u,setPortionNumber:g}),r.a.createElement(we,{totalUsersCount:a,currentPage:t,pageSize:6,portionSize:10,getRequestUsers:f,term:p,setCurrentPage:u,portionNumber:E,setPortionNumber:g}),r.a.createElement(Ue,{users:c,followingInProgress:o,follow:l,unfollow:i,isFetching:s}))})),Le=a(138),Me=a.n(Le);var De=function(){return r.a.createElement("div",{className:Me.a.messages},"\u041d\u043e\u0432\u043e\u0441\u0442\u0438")},Re=a(139),Ge=a.n(Re);var Be=function(){return r.a.createElement("div",{className:Ge.a.messages},"\u041c\u0443\u0437\u044b\u043a\u0430")},He=a(140),ze=a.n(He);var Je=function(){return r.a.createElement("div",{className:ze.a.messages},"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438")},We=a(126),Ze=a(127),Ve=a(141),qe=a(142),Ke=a.n(qe);function Xe(e){return function(t){var a=t.meta,n=t.input,s=Object(Ve.a)(t,["meta","input"]),c=a.error&&a.touched;return r.a.createElement("span",{className:c?Ke.a.error:null},r.a.createElement(e,Object.assign({},n,s)),c&&r.a.createElement("span",null,a.error))}}var Qe=function(e){if(!e)return"\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435"},Ye=function(e){return function(t){if(t.length>e)return"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u0430 - ".concat(e)}},$e=a(23),et="samurai-network/app/INITIALIZED_SUCCESS",tt={initialized:!1};var at=function(){return function(e,t){var a,n,r;return P.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(a=t().auth.isAuth,n=t().auth.userId,!a||!n){s.next=7;break}return s.next=5,P.a.awrap(F(n));case 5:r=s.sent,e(it(r));case 7:case"end":return s.stop()}}))}},nt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt;switch((arguments.length>1?arguments[1]:void 0).type){case et:return Object(I.a)({},e,{initialized:!0});default:return e}},rt="samurai-network/auth/SET_USER_DATA",st="samurai-network/auth/GET_CAPTCHA_URL",ct="samurai-network/auth/SET_MY_PROFILE",ot={userId:null,email:null,login:null,isFetching:!1,isAuth:!1,captchaUrl:null,myProfile:null};var ut=function(e,t,a,n){return{type:rt,payload:{userId:e,email:t,login:a,isAuth:n}}},lt=function(e){return{type:st,captchaUrl:e}},it=function(e){return{type:ct,profile:e}},mt=function(){return function(e){var t,a,n,r,s;return P.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,P.a.awrap(D());case 2:0===(t=c.sent).resultCode&&(a=t.data,n=a.id,r=a.email,s=a.login,e(ut(n,r,s,!0)));case 4:case"end":return c.stop()}}))}},ft=function(){return function(e){var t,a;return P.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,P.a.awrap(B());case 2:t=n.sent,a=t.url,e(lt(a));case 5:case"end":return n.stop()}}))}},pt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case rt:return Object(I.a)({},e,{},t.payload);case st:return Object(I.a)({},e,{captchaUrl:t.captchaUrl});case ct:return Object(I.a)({},e,{myProfile:t.profile});default:return e}},dt=Xe("input");var vt=Object(Ze.a)({form:"login"})((function(e){var t=e.handleSubmit,a=e.error,n=e.captchaUrl;return r.a.createElement("form",{onSubmit:t},r.a.createElement("div",null,r.a.createElement(We.a,{type:"text",placeholder:"\u041b\u043e\u0433\u0438\u043d",name:"login",component:dt,validate:[Qe]})),r.a.createElement("div",null,r.a.createElement(We.a,{type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",name:"password",component:dt,validate:[Qe]})),r.a.createElement(We.a,{type:"checkbox",name:"rememberMe",id:"rememberMe",component:dt,checked:!0}),r.a.createElement("label",{htmlFor:"rememberMe"},"\u0417\u0430\u043f\u043e\u043c\u043d\u0438\u0442\u044c \u043c\u0435\u043d\u044f"),n&&r.a.createElement("img",{src:n,alt:"captcha"}),n&&r.a.createElement(We.a,{type:"text",placeholder:"\u041a\u0430\u043f\u0447\u0430",name:"captcha",component:dt,validate:[Qe]}),a?r.a.createElement("div",{style:{color:"red"}},a):null,r.a.createElement("div",null,r.a.createElement("button",null,"\u0412\u043e\u0439\u0442\u0438")))})),Et=Object(o.b)((function(e){return{isAuth:e.auth.isAuth,captchaUrl:e.auth.captchaUrl}}),{login:function(e,t,a,n){return function(r){var s;return P.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,P.a.awrap(R(e,t,a,n));case 2:if(0!==(s=c.sent).resultCode){c.next=7;break}r(mt()).then((function(){r(at())})),c.next=11;break;case 7:if(10!==s.resultCode){c.next=10;break}return c.next=10,P.a.awrap(r(ft()));case 10:r(Object($e.a)("login",{_error:s.messages[0]}));case 11:case"end":return c.stop()}}))}}})((function(e){return e.isAuth?r.a.createElement(b.a,{to:"/profile"}):r.a.createElement("div",null,r.a.createElement("h1",null,"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"),r.a.createElement(vt,{captchaUrl:e.captchaUrl,onSubmit:function(t){var a,n,r,s;return P.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:a=t.login,n=t.password,r=t.rememberMe,s=t.captcha,e.login(a,n,r,s);case 2:case"end":return c.stop()}}))}}))})),gt="samurai-network/messages/SEND_MESSAGE",_t={dialogs:[{id:1,username:"\u0414\u0438\u043c\u044b\u0447"},{id:2,username:"\u0421\u0430\u0448\u0430"},{id:3,username:"\u0412\u0430\u043b\u0435\u0440\u0430"},{id:4,username:"\u0418\u0432\u0430\u043d"},{id:5,username:"\u0421\u0432\u0435\u0442\u0430"}],messages:[{id:1,username:"\u0414\u0438\u043c\u044b\u0447",message:"\u042f \u043b\u044e\u0431\u043b\u044e react!"},{id:2,username:"\u0414\u0438\u043c\u044b\u0447",message:"\u042f \u043b\u044e\u0431\u043b\u044e react!"}]};var ht=function(e){return{type:gt,formData:e}},bt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_t,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case gt:var a={id:e.messages[e.messages.length-1].id+1,username:"username",message:t.formData.message};return Object(I.a)({},e,{messages:[].concat(Object(y.a)(e.messages),[a])});default:return e}},wt=a(51),xt=a.n(wt),Nt=a(144),Ot=a.n(Nt);var Pt=function(e){return r.a.createElement("li",{className:Ot.a.dialog},r.a.createElement(v.b,{to:"/messages/".concat(String(e.id))},e.name))},yt=a(69),It=a.n(yt);var St=function(e){return r.a.createElement("li",{className:It.a.chatItem},r.a.createElement("div",{className:It.a.profile},r.a.createElement("img",{className:It.a.avatar,src:"https://miro.medium.com/max/480/1*5LGjgBL2kWpog3AodB569A.jpeg",alt:"avatar"}),r.a.createElement("div",null,e.name)),r.a.createElement("div",null,e.message))},kt=Ye(10),jt=Xe("textarea");var Ct=Object(Ze.a)({form:"addMessage"})((function(e){return r.a.createElement("form",{onSubmit:e.handleSubmit},r.a.createElement("div",null,r.a.createElement(We.a,{name:"message",validate:[Qe,kt],component:jt})),r.a.createElement("div",null,r.a.createElement("button",null,"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c")))})),At=function(e){var t=e.state.dialogs.map((function(e){return r.a.createElement(Pt,{key:e.id,id:e.id,name:e.username})})),a=e.state.messages.map((function(e){return r.a.createElement(St,{key:e.id,name:e.username,message:e.message})}));return r.a.createElement("div",{className:xt.a.messages},r.a.createElement("div",{className:xt.a.output},r.a.createElement("ul",{className:xt.a.dialogs},t),r.a.createElement("ul",{className:xt.a.chat},a)),r.a.createElement(Ct,{onSubmit:function(t){e.buttonOnClick(t)}}))},Ft=a(145),Ut=a(146),Tt=a(151),Lt=a(147),Mt=a(152);function Dt(e){return{isAuth:e.auth.isAuth}}var Rt=Object(le.d)(Object(o.b)((function(e){return{state:e.messagesPage}}),(function(e){return{buttonOnClick:function(t){e(ht(t))}}})),(function(e){var t=function(t){function a(){return Object(Ft.a)(this,a),Object(Tt.a)(this,Object(Lt.a)(a).apply(this,arguments))}return Object(Mt.a)(a,t),Object(Ut.a)(a,[{key:"render",value:function(){return this.props.isAuth?r.a.createElement(e,this.props):r.a.createElement(b.a,{to:"/login"})}}]),a}(r.a.Component);return Object(o.b)(Dt)(t)}))(At),Gt="samurai-network/profile/ADD_POST",Bt="samurai-network/profile/SET_USER_PROFILE",Ht="samurai-network/profile/SET_STATUS",zt="samurai-network/profile/SET_PROFILE_PHOTO",Jt="samurai-network/profile/SET_AVATAR_FETCHING",Wt={posts:[{id:1,text:"\u0412\u0430\u043c \u043d\u0440\u0430\u0432\u0438\u0442\u0441\u044f React?",likes:4},{id:2,text:"hey",likes:2}],profile:null,status:"",avatarIsFetching:!1};var Zt=function(e){return{type:Gt,text:e.newPost}},Vt=function(e){return{type:Bt,profile:e}},qt=function(e){return{type:Ht,status:e}},Kt=function(e){return{type:Jt,isFetching:e}},Xt=function(e){return function(t){var a;return P.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e){n.next=6;break}return t(Vt(null)),n.next=4,P.a.awrap(F(e));case 4:a=n.sent,t(Vt(a));case 6:case"end":return n.stop()}}))}},Qt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Gt:var a={id:e.posts[e.posts.length-1].id+1,text:t.text,likes:0};return Object(I.a)({},e,{posts:[].concat(Object(y.a)(e.posts),[a])});case Bt:return Object(I.a)({},e,{profile:t.profile});case Ht:return Object(I.a)({},e,{status:t.status});case zt:return Object(I.a)({},e,{profile:Object(I.a)({},e.profile,{photos:t.photos})});case Jt:return Object(I.a)({},e,{avatarIsFetching:t.isFetching});default:return e}},Yt=a(33),$t=a.n(Yt);var ea=function(e){var t=e.isOwner,a=e.savePhoto,n=e.profile,s=e.setAvatarIsFetching,c=e.avatarIsFetching,o=r.a.createRef();return r.a.createElement("div",{className:$t.a.avatar},r.a.createElement("div",{className:$t.a.avatarWrapper},c?r.a.createElement(Fe,null):r.a.createElement("img",{className:$t.a.avatarIMG,src:n.photos.large||Ie.a,alt:"avatar"})),t&&r.a.createElement("div",{className:$t.a.upload},r.a.createElement("input",{className:$t.a.uploadInput,onChange:function(e){if(e.target.files.length){var t=e.target.files[0];o.current.textContent=t.name,s(!0),a(t)}},type:"file",id:"UserPhotoUpload"}),r.a.createElement("label",{ref:o,className:$t.a.uploadLabel,htmlFor:"UserPhotoUpload"},"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u044e")))},ta=a(95),aa=a.n(ta),na=a(41),ra=a.n(na),sa=function(e){var t=e.status,a=e.updateStatus,s=e.isOwner,c=Object(n.useState)(!1),o=Object(N.a)(c,2),u=o[0],l=o[1],i=Object(n.useState)(t),m=Object(N.a)(i,2),f=m[0],p=m[1];Object(n.useEffect)((function(){p(t)}),[t]);var d=(t?ra.a.statusExist:ra.a.statusNotExist)+" "+ra.a.status;return r.a.createElement("div",{className:ra.a.statusBox},u?r.a.createElement("input",{autoFocus:!0,onChange:function(e){p(e.currentTarget.value)},onBlur:function(){l(!1),a(f)},onFocus:function(e){e.currentTarget.select()},type:"text",value:f,className:ra.a.statusInput}):s&&r.a.createElement("button",{className:d,onClick:function(){l(!0)}},t||"\u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0442\u0430\u0442\u0443\u0441"))},ca=a(148),oa=a.n(ca),ua=function(e){var t=e.width,a=e.margin,n=e.placeholder;return r.a.createElement("input",{style:{width:t,margin:a},className:oa.a.input,placeholder:n})},la=a(149),ia=a.n(la),ma=function(e){var t=e.width,a=e.margin,n=e.placeholder,s=e.rows,c=void 0===s?1:s,o=e.cols;return r.a.createElement("textarea",{rows:c,cols:o,style:{width:t,margin:a},className:ia.a.textarea,placeholder:n})};var fa=Object(Ze.a)({form:"edit-profile"})((function(e){var t=e.handleSubmit,a=e.error,n=e.profile;return r.a.createElement("form",{onSubmit:t},a&&r.a.createElement("div",null,a),r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("label",null,"\u0418\u043c\u044f:",r.a.createElement(We.a,{type:"text",placeholder:"\u0418\u043c\u044f",name:"fullName",component:ua,validate:[Qe]}))),r.a.createElement("div",null,r.a.createElement("label",null,"\u0418\u0449\u0443 \u0440\u0430\u0431\u043e\u0442\u0443:",r.a.createElement(We.a,{type:"checkbox",name:"lookingForAJob",component:ua}))),r.a.createElement("div",null,r.a.createElement("label",null,"\u041c\u043e\u0438 \u043d\u0430\u0432\u044b\u043a\u0438:",r.a.createElement(We.a,{name:"lookingForAJobDescription",component:ma,validate:[Qe]}))),r.a.createElement("div",null,r.a.createElement("label",null,"\u041e\u0431\u043e \u043c\u043d\u0435:",r.a.createElement(We.a,{name:"aboutMe",component:ma,validate:[Qe]}))),r.a.createElement("div",null,r.a.createElement("b",null,"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b"),Object.keys(n.contacts).map((function(e){return r.a.createElement("div",{key:e},r.a.createElement("b",null,e),":",r.a.createElement(We.a,{type:"text",placeholder:e,name:"contacts."+e,component:ua}))})))),r.a.createElement(de,null,"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"))})),pa=a(70),da=a.n(pa);var va=function(e){var t=e.profile;return r.a.createElement("dl",{className:da.a.about},r.a.createElement("div",null,r.a.createElement("dt",null,"\u0418\u0449\u0443 \u0440\u0430\u0431\u043e\u0442\u0443:"),r.a.createElement("dd",null," ",t.lookingForAJob?"\u0434\u0430":"\u043d\u0435\u0442")),r.a.createElement("div",null,r.a.createElement("dt",null,"\u041c\u043e\u0438 \u043d\u0430\u0432\u044b\u043a\u0438:"),r.a.createElement("dd",null," ",t.lookingForAJobDescription||"\u043d\u0435\u0442\u0443")),r.a.createElement("div",null,r.a.createElement("dt",null,"\u041e\u0431\u043e \u043c\u043d\u0435:"),r.a.createElement("dd",null," ",t.aboutMe||"\u043d\u0435 \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e")),Object.values(t.contacts).some((function(e){return null!==e}))&&r.a.createElement("div",{className:da.a.contacts},r.a.createElement("dt",null,"\u041c\u043e\u0438 \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u044b:"),r.a.createElement("dd",null,r.a.createElement("dl",{className:da.a.contactsList},Object.entries(t.contacts).map((function(e){var a=e[0];return e[1]?r.a.createElement("div",{key:a},r.a.createElement("dt",null,a,":"),r.a.createElement("dd",null,r.a.createElement("a",{rel:"noopener noreferrer",target:"_blank",href:t.contacts[a]},t.contacts[a]))):null}))))))};var Ea=function(e){var t=e.profile,a=e.status,s=e.isOwner,c=e.saveProfile,o=e.updateStatus,u=Object(n.useState)(!1),l=Object(N.a)(u,2),i=l[0],m=l[1];return r.a.createElement("div",{className:aa.a.info},r.a.createElement("div",null,r.a.createElement("h1",{className:aa.a.userName},t.fullName),r.a.createElement(sa,{status:a,updateStatus:o,isOwner:s}),i?r.a.createElement(fa,{profile:t,initialValues:t,onSubmit:function(e){c(e).then((function(){m(!1)}))}}):r.a.createElement(va,{isOwner:s,profile:t})),s&&!i&&r.a.createElement("div",null,r.a.createElement(de,{onClick:function(){m(!0)}},"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c")))};var ga=function(e){var t=e.profile,a=e.savePhoto,n=e.status,s=e.updateStatus,c=e.isOwner,o=e.saveProfile,u=e.avatarIsFetching,l=e.setAvatarIsFetching;return t?r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(ea,{savePhoto:a,profile:t,isOwner:c,avatarIsFetching:u,setAvatarIsFetching:l}),r.a.createElement(Ea,{status:n,updateStatus:s,saveProfile:o,profile:t,isOwner:c})):r.a.createElement(Fe,null)},_a=a(42),ha=a.n(_a),ba=a(71),wa=a.n(ba);var xa=function(e){return r.a.createElement("div",{className:wa.a.post},r.a.createElement("div",null,r.a.createElement("img",{className:wa.a.avatar,src:"https://miro.medium.com/max/480/1*5LGjgBL2kWpog3AodB569A.jpeg",alt:""})),r.a.createElement("div",{className:wa.a.message},r.a.createElement("div",null,e.text),r.a.createElement("div",null,e.likes,"\u2665")))},Na=Ye(10),Oa=Xe("textarea");var Pa=Object(Ze.a)({form:"profileAddNewPost"})((function(e){return r.a.createElement("form",{onSubmit:e.handleSubmit},r.a.createElement("div",null,r.a.createElement(We.a,{className:ha.a.textarea,name:"newPost",component:Oa,placeholder:"\u0427\u0442\u043e \u0443 \u0432\u0430\u0441 \u043d\u043e\u0432\u043e\u0433\u043e?",validate:[Qe,Na]})),r.a.createElement("div",null,r.a.createElement("button",{className:ha.a.button},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c")))}));var ya=function(e){var t=e.state.profilePage.posts.map((function(e){return r.a.createElement(xa,{key:e.id,text:e.text,likes:e.likes})})).reverse();return r.a.createElement("div",{className:ha.a.posts},r.a.createElement("h2",{className:ha.a.title},"\u041f\u043e\u0441\u0442\u044b"),r.a.createElement(Pa,{onSubmit:function(t){e.addPost(t)}}),r.a.createElement("div",{className:ha.a.postsList},t))};var Ia=Object(o.b)((function(e){return{state:e}}),(function(e){return{addPost:function(t){e(Zt(t))}}}))(ya);var Sa=Object(le.d)(Object(o.b)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,userID:e.auth.userId,avatarIsFetching:e.profilePage.avatarIsFetching}}),{getUsersProfile:Xt,getStatus:function(e){return function(t){var a;return P.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,P.a.awrap(U(e));case 2:a=n.sent,t(qt(a));case 4:case"end":return n.stop()}}))}},updateStatus:function(e){return function(t){return P.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,P.a.awrap(T(e));case 2:0===a.sent.resultCode&&t(qt(e));case 4:case"end":return a.stop()}}))}},savePhoto:function(e){return function(t){var a;return P.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,P.a.awrap(L(e));case 2:0===(a=n.sent).resultCode&&(t((r=a.data.photos,{type:zt,photos:r})),t(Kt(!1)));case 4:case"end":return n.stop()}var r}))}},saveProfile:function(e){return function(t,a){return P.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,P.a.awrap(M(e));case 2:if(0!==n.sent.resultCode){n.next=8;break}return n.next=6,P.a.awrap(t(Xt(a().auth.userId)));case 6:n.next=10;break;case 8:return t(Object($e.a)("edit-profile",{_error:"response.data.messages[0]"})),n.abrupt("return",Promise.reject());case 10:case"end":return n.stop()}}))}},setAvatarIsFetching:Kt}),b.g)((function(e){var t=e.savePhoto,a=e.profile,s=e.status,c=e.updateStatus,o=e.saveProfile,u=e.match,l=e.userID,i=e.history,m=e.getUsersProfile,f=e.getStatus,p=e.avatarIsFetching,d=e.setAvatarIsFetching,v=+u.params.userID||l||+i.push("/login"),E=l===v;return Object(n.useEffect)((function(){v&&(m(v),f(v))}),[v,m,f]),r.a.createElement(r.a.Fragment,null,r.a.createElement(ga,{savePhoto:t,profile:a,status:s,updateStatus:c,isOwner:E,saveProfile:o,avatarIsFetching:p,setAvatarIsFetching:d}),r.a.createElement(Ia,null))}));var ka=function(){return r.a.createElement("div",{className:x.a.content},r.a.createElement(b.d,null,r.a.createElement(b.b,{exact:!0,path:"/",render:function(){return r.a.createElement(b.a,{to:"/profile"})}}),"// @ts-ignore",r.a.createElement(b.b,{path:"/profile/:userID?",render:function(){return r.a.createElement(Sa,null)}}),r.a.createElement(b.b,{path:"/messages",render:function(){return r.a.createElement(Rt,null)}}),r.a.createElement(b.b,{path:"/users",render:function(){return r.a.createElement(Te,null)}}),r.a.createElement(b.b,{path:"/news",component:De}),r.a.createElement(b.b,{path:"/music",component:Be}),r.a.createElement(b.b,{path:"/settings",component:Je}),r.a.createElement(b.b,{path:"/login",render:function(){return r.a.createElement(Et,null)}}),r.a.createElement(b.b,{path:"*",render:function(){return"404"}})))},ja=a(34),Ca=a.n(ja),Aa=Object(o.b)((function(e){return{isAuth:e.auth.isAuth,myProfile:e.auth.myProfile}}),{logout:function(){return function(e){return P.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P.a.awrap(G());case 2:0===t.sent.resultCode&&e(ut(null,null,null,!1));case 4:case"end":return t.stop()}}))}}})((function(e){var t=e.isAuth,a=e.logout,n=e.myProfile;return r.a.createElement("header",{className:Ca.a.header},r.a.createElement("div",{className:Ca.a.container},r.a.createElement("div",null,"Samurai-Network"),t&&n&&n.photos.small?r.a.createElement("div",{className:Ca.a.infoMe},r.a.createElement(v.b,{to:"/profile",className:Ca.a.userName},r.a.createElement("span",null,n.fullName.split(" ")[0])),r.a.createElement(v.b,{to:"/profile",className:Ca.a.avatar},r.a.createElement("img",{src:n.photos.small,alt:"avatar"})),r.a.createElement(de,{onClick:a},"\u0412\u044b\u0439\u0442\u0438")):r.a.createElement(v.b,{to:"/login",className:Ca.a.login},r.a.createElement(de,null,"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f"))))}));var Fa=Object(o.b)((function(e){return{initialized:e.init.initialized}}),{initializeApp:function(){return function(e){return P.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:e(mt()).then((function(){e(at()).then((function(){e({type:et})}))}));case 1:case"end":return t.stop()}}))}}})((function(e){var t=e.initializeApp,a=e.initialized;return Object(n.useEffect)((function(){t()}),[t]),a?r.a.createElement(v.a,null,r.a.createElement("div",{className:l.a.page},r.a.createElement(Aa,null),r.a.createElement("main",{className:l.a.main},r.a.createElement(h,null),r.a.createElement(ka,null)),r.a.createElement(f,null))):r.a.createElement(Fe,{fullscreen:!0})})),Ua=a(150),Ta=a(128),La=Object(le.c)({profilePage:Qt,messagesPage:bt,usersPage:te,auth:pt,init:nt,form:Ta.a}),Ma=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||le.d,Da=Object(le.e)(La,Ma(Object(le.a)(Ua.a)));c.a.render(r.a.createElement(o.a,{store:Da},r.a.createElement(Fa,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},33:function(e,t,a){e.exports={avatar:"Avatar_avatar__212y-",avatarIMG:"Avatar_avatarIMG__1-LTa",upload:"Avatar_upload__3w34x",uploadInput:"Avatar_uploadInput__3u7cW",uploadLabel:"Avatar_uploadLabel__2Exb6"}},34:function(e,t,a){e.exports={header:"Header_header__2CR8J",container:"Header_container__HDvgl",userName:"Header_userName__3dpGW",avatar:"Header_avatar__34Ghc",infoMe:"Header_infoMe__UMQTd"}},41:function(e,t,a){e.exports={statusBox:"Status_statusBox__3qS3R",status:"Status_status__1ZDrO",statusNotExist:"Status_statusNotExist__2Ayt_",statusExist:"Status_statusExist__2EA9K",statusInput:"Status_statusInput__2o4UG"}},42:function(e,t,a){e.exports={posts:"Posts_posts__epRJ6",title:"Posts_title__3oTfI",textarea:"Posts_textarea__1CXXA",button:"Posts_button__3XZT1",postsList:"Posts_postsList__3exEI"}},50:function(e,t,a){e.exports={preloaderIMG:"Preloader_preloaderIMG__BZHNf",wrapper:"Preloader_wrapper__1pJ8g",preloader:"Preloader_preloader__oGcz1"}},51:function(e,t,a){e.exports={messages:"Messages_messages__sE-hE",output:"Messages_output__3DU-1",dialogs:"Messages_dialogs__2NDBb",chat:"Messages_chat__3KJVi"}},63:function(e,t,a){e.exports=a.p+"static/media/defaultAvatar.b4b85090.png"},66:function(e,t,a){e.exports={div:"Search_div__2HjV8",input:"Search_input__1SF7g",button:"Search_button__tmFR-",reset:"Search_reset__2G7ng"}},67:function(e,t,a){e.exports={paginationItems:"Paginator_paginationItems__2iECZ",button:"Paginator_button__1_Jp0"}},69:function(e,t,a){e.exports={chatItem:"Message_chatItem__1I8h1",profile:"Message_profile__PfNrB",avatar:"Message_avatar__2V5Z4"}},70:function(e,t,a){e.exports={about:"ProfileData_about__2NVys",contactsList:"ProfileData_contactsList__ZEb2E",contacts:"ProfileData_contacts__KLq0S"}},71:function(e,t,a){e.exports={post:"Post_post__lASZN",avatar:"Post_avatar__3eC36",message:"Post_message__3tS2K"}},89:function(e,t,a){e.exports={page:"App_page__4Klr-",main:"App_main__1nCkj"}},91:function(e,t,a){e.exports={paginationItem:"PaginationItem_paginationItem__1EdWb",paginationItemActive:"PaginationItem_paginationItemActive__1EfE6"}},92:function(e,t,a){e.exports=a.p+"static/media/preloader.584b607f.gif"},95:function(e,t,a){e.exports={info:"UserInfo_info__zWzay",userName:"UserInfo_userName__2HoIC"}}},[[178,1,2]]]);
//# sourceMappingURL=main.17051c4e.chunk.js.map