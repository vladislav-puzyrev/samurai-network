(this["webpackJsonpsamurai-network"]=this["webpackJsonpsamurai-network"]||[]).push([[0],{100:function(e,t,a){e.exports={preloaderIMG:"Preloader_preloaderIMG__BZHNf",preloaderStretch:"Preloader_preloaderStretch__3XuiL"}},101:function(e,t,a){e.exports={input:"Input_input__3Rg3-",error:"Input_error__36SvP"}},104:function(e,t,a){e.exports={info:"UserInfo_info__zWzay",userName:"UserInfo_userName__2HoIC"}},140:function(e,t,a){e.exports={footer:"Footer_footer__3hmYT"}},141:function(e,t,a){e.exports={aside:"Sidebar_aside__1e2NK"}},144:function(e,t,a){e.exports={content:"Main_content__2h5Jj"}},146:function(e,t,a){e.exports={button:"Button_button__OZeNM"}},147:function(e,t,a){e.exports={users:"UsersList_users__WQVOf"}},148:function(e,t,a){e.exports=a.p+"static/media/preloader.584b607f.gif"},149:function(e,t,a){},150:function(e,t,a){},151:function(e,t,a){},152:function(e,t,a){e.exports={form:"Login_form__3z_ct"}},154:function(e,t,a){e.exports={wrapper:"Interlocutors_wrapper__2zA-0"}},155:function(e,t,a){e.exports={wrapper:"InterlocutorsList_wrapper__15THU",ul:"InterlocutorsList_ul__3JB43"}},156:function(e,t,a){e.exports={wrapper:"Dialog_wrapper__111U0"}},157:function(e,t,a){e.exports={wrapper:"DialogMessages_wrapper__2CNKp"}},158:function(e,t,a){e.exports={wrapper:"DialogForm_wrapper__1YYQn"}},159:function(e,t,a){e.exports={messages:"Messages_messages__sE-hE"}},186:function(e,t,a){e.exports=a(314)},191:function(e,t,a){},23:function(e,t,a){e.exports=a.p+"static/media/defaultAvatar.b4b85090.png"},24:function(e,t,a){e.exports={user:"User_user__3Qdic",avatarBox:"User_avatarBox__dLefj",info:"User_info__3dI-o",userName:"User_userName__1AQPc",followButton:"User_followButton__y-S0x",sendMessage:"User_sendMessage__39BmE",userStatus:"User_userStatus__1tTcC",followedButton:"User_followedButton__20EPy"}},25:function(e,t,a){e.exports={form:"ProfileDataForm_form__2KiwA",labelWrapper:"ProfileDataForm_labelWrapper__1JZeC",buttons:"ProfileDataForm_buttons__QBzRg"}},29:function(e,t,a){e.exports={avatar:"Avatar_avatar__212y-",avatarWrapper:"Avatar_avatarWrapper__2hCnO",avatarIMG:"Avatar_avatarIMG__1-LTa",upload:"Avatar_upload__3w34x",uploadInput:"Avatar_uploadInput__3u7cW",uploadLabel:"Avatar_uploadLabel__2Exb6",sendMessage:"Avatar_sendMessage__261Dv",buttonText:"Avatar_buttonText__3McX0"}},31:function(e,t,a){e.exports={wrapper:"InterlocutorsListItem_wrapper__1IgFZ",userName:"InterlocutorsListItem_userName__1P_t4",li:"InterlocutorsListItem_li__1DLA-",a:"InterlocutorsListItem_a__Eytt8",active:"InterlocutorsListItem_active__3BK1D",avatar:"InterlocutorsListItem_avatar__3l5eU",info:"InterlocutorsListItem_info__2OczL",infoMessage:"InterlocutorsListItem_infoMessage__GcUxi"}},314:function(e,t,a){"use strict";a.r(t);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var n=a(0),r=a.n(n),s=a(67),o=a.n(s),c=(a(191),a(12)),l=a(13),u=a(57),i=a.n(u),m=a(140),p=a.n(m);var f=function(){return r.a.createElement("footer",{className:p.a.footer},"samurai-network")},d=a(141),g=a.n(d),E=a(8),v=a(7),_=a.n(v),h=a(16),w=a(15),b=r.a.memo((function(e){var t=e.newMessagesCount;return r.a.createElement("ul",{className:_.a.menu},r.a.createElement("li",{className:_.a.menuItem},r.a.createElement(E.b,{exact:!0,to:"/profile",className:_.a.menuLink,activeClassName:_.a.active},r.a.createElement("span",{className:_.a.linkIcon},r.a.createElement(w.a,{icon:h.c})),r.a.createElement("span",{className:_.a.linkText},"\u041c\u043e\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430"))),r.a.createElement("li",{className:_.a.menuItem},r.a.createElement(E.b,{to:"/messages",className:_.a.menuLink,activeClassName:_.a.active},r.a.createElement("span",{className:_.a.linkIcon},r.a.createElement(w.a,{icon:h.b})),r.a.createElement("span",{className:_.a.linkText},"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f ",t>0&&"(".concat(t,")")))),r.a.createElement("li",{className:_.a.menuItem},r.a.createElement(E.b,{to:"/users",className:_.a.menuLink,activeClassName:_.a.active},r.a.createElement("span",{className:_.a.linkIcon},r.a.createElement(w.a,{icon:h.h})),r.a.createElement("span",{className:_.a.linkText},"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438"))),r.a.createElement("li",{className:_.a.menuItem},r.a.createElement(E.b,{to:"/news",className:_.a.menuLink,activeClassName:_.a.active},r.a.createElement("span",{className:_.a.linkIcon},r.a.createElement(w.a,{icon:h.e})),r.a.createElement("span",{className:_.a.linkText},"\u041d\u043e\u0432\u043e\u0441\u0442\u0438"))),r.a.createElement("li",{className:_.a.menuItem},r.a.createElement(E.b,{to:"/music",className:_.a.menuLink,activeClassName:_.a.active},r.a.createElement("span",{className:_.a.linkIcon},r.a.createElement(w.a,{icon:h.d})),r.a.createElement("span",{className:_.a.linkText},"\u041c\u0443\u0437\u044b\u043a\u0430"))),r.a.createElement("li",{className:_.a.menuItem},r.a.createElement(E.b,{to:"/settings",className:_.a.menuLink,activeClassName:_.a.active},r.a.createElement("span",{className:_.a.linkIcon},r.a.createElement(w.a,{icon:h.g})),r.a.createElement("span",{className:_.a.linkText},"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"))))})),N=a(1),x=a.n(N),I=a(70),y=a(6),O=a(143),C=a.n(O).a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"ca3b0eb4-4af6-4803-8caa-f7d26464a12c"}}),S=function(e,t){var a,n,r=arguments;return x.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return a=r.length>2&&void 0!==r[2]?r[2]:"",s.next=3,x.a.awrap(C.get("users?count=".concat(e,"&page=").concat(t,"&term=").concat(a)));case 3:return n=s.sent,s.abrupt("return",n.data);case 5:case"end":return s.stop()}}))},P=function(e){var t;return x.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,x.a.awrap(C.get("follow/".concat(e)));case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}))},D=function(e){var t;return x.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,x.a.awrap(C.post("follow/".concat(e)));case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}))},k=function(e){var t;return x.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,x.a.awrap(C.delete("follow/".concat(e)));case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}))},j=function(e){var t;return x.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,x.a.awrap(C.get("profile/".concat(e)));case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}))},A=function(e){var t;return x.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,x.a.awrap(C.get("profile/status/".concat(e)));case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}))},M=function(e){var t;return x.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,x.a.awrap(C.put("profile/status",{status:e}));case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}))},F=function(e){var t,a;return x.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return(t=new FormData).append("image",e),n.next=4,x.a.awrap(C.put("profile/photo",t,{headers:{"Content-Type":"multipart/form-data"}}));case 4:return a=n.sent,n.abrupt("return",a.data);case 6:case"end":return n.stop()}}))},T=function(e){var t;return x.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,x.a.awrap(C.put("profile",e));case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}))},U=function(){var e;return x.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.a.awrap(C.get("auth/me"));case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}))},L=function(e,t){var a,n,r,s=arguments;return x.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return a=!(s.length>2&&void 0!==s[2])||s[2],n=s.length>3?s[3]:void 0,o.next=4,x.a.awrap(C.post("auth/login",{email:e,password:t,rememberMe:a,captcha:n}));case 4:return r=o.sent,o.abrupt("return",r.data);case 6:case"end":return o.stop()}}))},R=function(){var e;return x.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.a.awrap(C.post("auth/logout"));case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}))},B=function(){var e;return x.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.a.awrap(C.get("security/get-captcha-url"));case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}))},G=function(e){var t;return x.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,x.a.awrap(C.put("dialogs/".concat(e)));case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}))},W=function(){var e;return x.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.a.awrap(C.get("dialogs"));case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}))},H=function(e){var t;return x.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,x.a.awrap(C.get("dialogs/".concat(e,"/messages")));case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}))},z=function(e,t){var a;return x.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,x.a.awrap(C.post("dialogs/".concat(e,"/messages"),{body:t}));case 2:return a=n.sent,n.abrupt("return",a.data);case 4:case"end":return n.stop()}}))},J=function(e,t){var a;return x.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,x.a.awrap(C.get("dialogs/".concat(e,"/messages/new?newerThen=").concat(t)));case 2:return a=n.sent,n.abrupt("return",a.data);case 4:case"end":return n.stop()}}))},K=function(){var e;return x.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.a.awrap(C.get("dialogs/messages/new/count"));case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}))},Y="samurai-network/messages/SET_INTERLOCUTORS",q="samurai-network/messages/SET_NEW_INTERLOCUTOR",Q="samurai-network/messages/SET_CURRENT_DIALOG",X="samurai-network/messages/SET_MESSAGES_AFTER_DATE",V="samurai-network/messages/SET_NEW_MESSAGES_COUNT",Z="samurai-network/messages/SET_CURRENT_INTERLOCUTOR",$="samurai-network/messages/TOGGLE_IS_FETCHING",ee={interlocutors:null,newInterlocutor:null,currentDialog:null,messagesAfterDate:null,newMessagesCount:0,currentInterlocutor:null,fetching:{interlocutors:!1,newInterlocutor:!1,currentDialog:!1,messagesAfterDate:!1,newMessagesCount:!1,sendMessage:!1}};var te=function(e,t){return{type:$,property:e,isFetching:t}},ae=function(){return function(e){var t;return x.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return e(te("interlocutors",!0)),a.next=3,x.a.awrap(W());case 3:t=a.sent,e({type:Y,messages:t}),e(te("interlocutors",!1));case 6:case"end":return a.stop()}}))}},ne=function(e){return function(t){var a;return x.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t(te("currentDialog",!0)),n.next=3,x.a.awrap(H(e));case 3:(a=n.sent).error||(t((r=a.items,{type:Q,currentDialog:r})),t(te("currentDialog",!1)));case 5:case"end":return n.stop()}var r}))}},re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Y:return Object(y.a)({},e,{interlocutors:t.messages});case q:return Object(y.a)({},e,{newInterlocutor:t.profile});case Q:return Object(y.a)({},e,{currentDialog:t.currentDialog});case X:return Object(y.a)({},e,{messagesAfterDate:t.messagesAfterDate});case V:return Object(y.a)({},e,{newMessagesCount:t.count});case Z:return Object(y.a)({},e,{currentInterlocutor:t.userID});case $:return Object(y.a)({},e,{fetching:Object(y.a)({},e.fetching,Object(I.a)({},t.property,t.isFetching))});default:return e}};var se=function(e){Object(n.useEffect)((function(){e&&(document.title=e)}))};var oe=Object(l.b)((function(e){return{newMessagesCount:e.messages.newMessagesCount,isAuth:e.auth.isAuth,newMessagesCountFetching:e.messages.fetching.newMessagesCount}}),{getNewMessagesCount:function(){return function(e){var t;return x.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return e(te("newMessagesCount",!0)),a.next=3,x.a.awrap(K());case 3:t=a.sent,e({type:V,count:t}),e(te("newMessagesCount",!1));case 6:case"end":return a.stop()}}))}}})((function(e){var t=e.newMessagesCount,a=e.getNewMessagesCount,s=e.isAuth,o=e.newMessagesCountFetching,c=Object(n.useRef)();return Object(n.useEffect)((function(){s&&a()}),[a,s]),Object(n.useEffect)((function(){return s&&!o&&(c.current=setInterval((function(){o||a()}),1e4)),function(){c.current&&clearInterval(c.current)}}),[a,s,o]),se(t>0?"\u041d\u043e\u0432\u043e\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 - ".concat(t):null),r.a.createElement("aside",{className:g.a.aside},r.a.createElement(b,{newMessagesCount:t}))})),ce=a(36),le=a(144),ue=a.n(le),ie=a(73),me="samurai-network/users/FOLLOW",pe="samurai-network/users/UNFOLLOW",fe="samurai-network/users/SET_USERS",de="samurai-network/users/SET_CURRENT_PAGE",ge="samurai-network/users/SET_TOTAL_USERS_COUNT",Ee="samurai-network/users/SET_TERM",ve="samurai-network/users/TOGGLE_IS_FETCHING",_e="samurai-network/users/TOGGLE_IS_FOLLOWING_PROGRESS",he="samurai-network/users/TOGGLE_IS_FOLLOWING_USER",we={users:[],totalUsersCount:0,currentPage:1,isFetching:!1,followingInProgress:[],term:"",isFollowingUser:!1};var be=function(e){return{type:fe,users:e}},Ne=function(e){return{type:ge,totalUsersCount:e}},xe=function(e){return{type:ve,isFetching:e}},Ie=function(e,t){return{type:_e,isFetching:e,userId:t}},ye=function(e){return{type:he,following:e}},Oe=function(e){return function(t){return x.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t(Ie(!0,e)),a.next=3,x.a.awrap(D(e));case 3:0===a.sent.resultCode&&(t({type:me,id:e}),t(ye(!0))),t(Ie(!1,e));case 6:case"end":return a.stop()}}))}},Ce=function(e){return function(t){return x.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t(Ie(!0,e)),a.next=3,x.a.awrap(k(e));case 3:0===a.sent.resultCode&&(t({type:pe,id:e}),t(ye(!1))),t(Ie(!1,e));case 6:case"end":return a.stop()}}))}},Se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case me:return Object(y.a)({},e,{users:e.users.map((function(e){return e.id===t.id?Object(y.a)({},e,{followed:!0}):e}))});case pe:return Object(y.a)({},e,{users:e.users.map((function(e){return e.id===t.id?Object(y.a)({},e,{followed:!1}):e}))});case fe:return Object(y.a)({},e,{users:t.users});case de:return Object(y.a)({},e,{currentPage:t.currentPage});case ge:return Object(y.a)({},e,{totalUsersCount:t.totalUsersCount});case ve:return Object(y.a)({},e,{isFetching:t.isFetching});case _e:return Object(y.a)({},e,{followingInProgress:t.isFetching?[].concat(Object(ie.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!==t.userId}))});case Ee:return Object(y.a)({},e,{term:t.term});case he:return Object(y.a)({},e,{isFollowingUser:t.following});default:return e}},Pe=a(145),De=Object(Pe.a)((function(e){return e.users.users}),(function(e){return e.filter((function(){return!0}))})),ke=function(e){return e.users.totalUsersCount},je=function(e){return e.users.currentPage},Ae=function(e){return e.users.isFetching},Me=function(e){return e.users.followingInProgress},Fe=a(74),Te=a.n(Fe),Ue=a(146),Le=a.n(Ue),Re=function(e){var t=e.children,a=e.onClick,n=e.type,s=e.disabled,o=e.style;return r.a.createElement("button",{disabled:s,type:n,onClick:a,style:o,className:Le.a.button},t)},Be=r.a.memo((function(e){var t=e.setTerm,a=e.setCurrentPage,s=e.setPortionNumber,o=Object(n.useState)(""),l=Object(c.a)(o,2),u=l[0],i=l[1],m={cursor:u?"pointer":"not-allowed"};return r.a.createElement("div",{className:Te.a.div},r.a.createElement("input",{placeholder:"\u041f\u043e\u0438\u0441\u043a",type:"text",onChange:function(e){i(e.target.value)},className:Te.a.input,value:u}),r.a.createElement("button",{disabled:!u,style:m,onClick:function(){a(1),t(u),s(1)},className:Te.a.button},"\u041d\u0430\u0439\u0442\u0438"),r.a.createElement(Re,{style:{marginLeft:"10px"},onClick:function(){a(1),t(""),i(""),s(1)}},"\u0421\u0431\u0440\u043e\u0441"))})),Ge=r.a.memo(Be),We=a(75),He=a.n(We),ze=a(99),Je=a.n(ze),Ke=function(e){var t=e.active,a=e.number,n=t?Je.a.paginationItemActive:"";return r.a.createElement("li",{className:Je.a.paginationItem+" "+n,"data-number":a},a)},Ye=r.a.memo((function(e){var t=e.setCurrentPage,a=e.currentPage,s=e.totalUsersCount,o=e.pageSize,c=e.portionSize,l=e.getRequestUsers,u=e.term,i=e.portionNumber,m=e.setPortionNumber;Object(n.useEffect)((function(){l(o,a,u)}),[l,o,a,u]);for(var p=Math.ceil(s/o),f=[],d=1;d<s;d++)f.push(d);var g=Math.ceil(p/c),E=p/c*c,v=(i-1)*c+1,_=i*c;return r.a.createElement("div",{onClick:function(e){var a=e.target.dataset.number;a&&function(e){l(o,e,u),t(e)}(+a)},className:He.a.paginationItems},s>0&&r.a.createElement("button",{disabled:1===i,className:He.a.button,onClick:function(){m(i-1)}},"\u0412\u043b\u0435\u0432\u043e"),f.filter((function(e){return e>=v&&e<=_&&e<=E})).map((function(e){return r.a.createElement(Ke,{key:e,number:e,active:+a===e})})),s>0&&r.a.createElement("button",{disabled:g===i,className:He.a.button,onClick:function(){m(i+1)}},"\u0412\u043f\u0440\u0430\u0432\u043e"))})),qe=a(147),Qe=a.n(qe),Xe=a(24),Ve=a.n(Xe),Ze=a(23),$e=a.n(Ze),et=function(e){var t=e.user,a=e.followButtonDisabled,n=e.unfollow,s=e.follow,o=e.isAuth,c=function(){o&&(t.followed?n(t.id):s(t.id))},l=t.status&&t.status.length>80?t.status.slice(0,80)+"\u2026":t.status;return r.a.createElement("li",{className:Ve.a.user},r.a.createElement("div",{className:Ve.a.avatarBox},r.a.createElement(E.b,{to:"/profile/".concat(t.id)},r.a.createElement("img",{src:t.photos.small||$e.a,alt:"avatar"}))),r.a.createElement("div",{className:Ve.a.info},r.a.createElement(E.b,{className:Ve.a.userName,to:"/profile/".concat(t.id)},t.name),t.status&&r.a.createElement("span",{className:Ve.a.userStatus},l),t.followed?r.a.createElement("button",{className:Ve.a.followButton,disabled:a,onClick:c},r.a.createElement("span",{className:Ve.a.followedButton},"\u041e\u0442\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f"),r.a.createElement(w.a,{color:"#f03a17",icon:h.f})):r.a.createElement("button",{className:Ve.a.followButton,disabled:a,onClick:c},r.a.createElement("span",{className:Ve.a.followedButton},"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f"),r.a.createElement(w.a,{color:"#16c60c",icon:h.a})),r.a.createElement(E.b,{to:"/messages/".concat(t.id),className:Ve.a.sendMessage},"\u041d\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435")))},tt=a(100),at=a.n(tt),nt=a(148),rt=a.n(nt),st=function(e){var t=e.stretch;return r.a.createElement("img",{className:t?at.a.preloaderStretch:at.a.preloaderIMG,src:rt.a,alt:"load"})},ot=r.a.memo((function(e){var t=e.users,a=e.followingInProgress,n=e.follow,s=e.unfollow,o=e.isFetching,c=e.isAuth,l=t.length?t.map((function(e){return r.a.createElement(et,{key:e.id,user:e,followButtonDisabled:a.some((function(t){return t===e.id})),follow:n,unfollow:s,isAuth:c})})):"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e";return r.a.createElement("ul",{className:Qe.a.users},o?r.a.createElement(st,{stretch:!0}):l)}));var ct=Object(l.b)((function(e){return{users:De(e),totalUsersCount:ke(e),currentPage:je(e),isFetching:Ae(e),followingInProgress:Me(e),term:e.users.term,isAuth:e.auth.isAuth}}),{setCurrentPage:function(e){return{type:de,currentPage:e}},setIsFetching:xe,getRequestUsers:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return function(n){var r;return x.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return n(xe(!0)),s.next=3,x.a.awrap(S(e,t,a));case 3:r=s.sent,n(be(r.items)),n(Ne(r.totalCount)),n(xe(!1));case 7:case"end":return s.stop()}}))}},follow:Oe,unfollow:Ce,setTerm:function(e){return{type:Ee,term:e}}})((function(e){var t=e.currentPage,a=e.totalUsersCount,s=e.isFetching,o=e.users,l=e.followingInProgress,u=e.setCurrentPage,i=e.follow,m=e.unfollow,p=e.setTerm,f=e.getRequestUsers,d=e.term,g=e.isAuth;se("\u041f\u043e\u0438\u0441\u043a \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439"),Object(n.useEffect)((function(){return function(){u(1)}}),[u]);var E=Object(n.useState)(1),v=Object(c.a)(E,2),_=v[0],h=v[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438"),r.a.createElement(Ge,{setTerm:p,setCurrentPage:u,setPortionNumber:h}),r.a.createElement(Ye,{totalUsersCount:a,currentPage:t,pageSize:6,portionSize:10,getRequestUsers:f,term:d,setCurrentPage:u,portionNumber:_,setPortionNumber:h}),r.a.createElement(ot,{users:o,followingInProgress:l,follow:i,unfollow:m,isFetching:s,isAuth:g}))})),lt=a(149),ut=a.n(lt);var it=function(){return se("\u041d\u043e\u0432\u043e\u0441\u0442\u0438"),r.a.createElement("div",{className:ut.a.messages},"\u041d\u043e\u0432\u043e\u0441\u0442\u0438")},mt=a(150),pt=a.n(mt);var ft=function(){return se("\u041c\u0443\u0437\u044b\u043a\u0430"),r.a.createElement("div",{className:pt.a.messages},"\u041c\u0443\u0437\u044b\u043a\u0430")},dt=a(151),gt=a.n(dt);var Et=function(){return se("\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"),r.a.createElement("div",{className:gt.a.messages},"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438")},vt=a(136),_t=a(137),ht=function(e){if(!e)return"\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435"},wt=a(30),bt="samurai-network/app/INITIALIZED_SUCCESS",Nt={initialized:!1};var xt=function(){return function(e,t){var a,n,r;return x.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(a=t().auth.isAuth,n=t().auth.userId,!a||!n){s.next=7;break}return s.next=5,x.a.awrap(j(n));case 5:r=s.sent,e(jt(r));case 7:case"end":return s.stop()}}))}},It=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nt;switch((arguments.length>1?arguments[1]:void 0).type){case bt:return Object(y.a)({},e,{initialized:!0});default:return e}},yt="samurai-network/auth/SET_USER_DATA",Ot="samurai-network/auth/SET_CAPTCHA_URL",Ct="samurai-network/auth/SET_MY_PROFILE",St="samurai-network/auth/SET_MY_PHOTO",Pt={userId:null,email:null,login:null,isFetching:!1,isAuth:!1,captchaUrl:null,myProfile:null};var Dt=function(e,t,a,n){return{type:yt,payload:{userId:e,email:t,login:a,isAuth:n}}},kt=function(e){return{type:Ot,captchaUrl:e}},jt=function(e){return{type:Ct,profile:e}},At=function(e){return{type:St,photos:e}},Mt=function(){return function(e){var t,a,n,r,s;return x.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,x.a.awrap(U());case 2:0===(t=o.sent).resultCode&&(a=t.data,n=a.id,r=a.email,s=a.login,e(Dt(n,r,s,!0)));case 4:case"end":return o.stop()}}))}},Ft=function(){return function(e){var t,a;return x.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,x.a.awrap(B());case 2:t=n.sent,a=t.url,e(kt(a));case 5:case"end":return n.stop()}}))}},Tt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case yt:return Object(y.a)({},e,{},t.payload);case Ot:return Object(y.a)({},e,{captchaUrl:t.captchaUrl});case Ct:return Object(y.a)({},e,{myProfile:t.profile});case St:return Object(y.a)({},e,{myProfile:Object(y.a)({},e.myProfile,{photos:t.photos})});default:return e}},Ut=a(101),Lt=a.n(Ut),Rt=function(e){var t=e.placeholder,a=e.meta,n=e.input,s=e.type,o=e.id,c=e.style,l=void 0===c?{}:c,u=!!a&&(a.error&&a.touched),i="checkbox"===s?{width:"auto"}:{};return r.a.createElement("span",null,r.a.createElement("input",Object.assign({id:o,type:s,style:Object.assign(l,i),className:Lt.a.input,placeholder:t},n)),u&&a&&r.a.createElement("span",{className:Lt.a.error},a.error))},Bt=a(152),Gt=a.n(Bt),Wt=Object(_t.a)({form:"login"})((function(e){var t=e.handleSubmit,a=e.error,n=e.captchaUrl,s=e.logTestAccount;return r.a.createElement("form",{onSubmit:t,className:Gt.a.form},r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"loginLogin"},"Email"),r.a.createElement(vt.a,{type:"text",placeholder:"Email",name:"userLogin",component:Rt,validate:[ht],id:"loginLogin"})),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"loginPassword"},"\u041f\u0430\u0440\u043e\u043b\u044c"),r.a.createElement(vt.a,{type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",name:"password",component:Rt,validate:[ht],id:"loginPassword"})),r.a.createElement("div",null,r.a.createElement(vt.a,{type:"checkbox",name:"rememberMe",id:"rememberMe",component:Rt}),r.a.createElement("label",{htmlFor:"rememberMe"},"\u0417\u0430\u043f\u043e\u043c\u043d\u0438\u0442\u044c \u043c\u0435\u043d\u044f")),r.a.createElement("div",null,n&&r.a.createElement("img",{src:n,alt:"captcha"}),n&&r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{htmlFor:"loginCaptcha"},"\u041a\u0430\u043f\u0447\u0430"),r.a.createElement(vt.a,{type:"text",placeholder:"\u041a\u0430\u043f\u0447\u0430",name:"captcha",component:Rt,validate:[ht],id:"loginCaptcha"}))),a?r.a.createElement("div",{style:{color:"red"}},a):null,r.a.createElement("div",null,r.a.createElement(Re,{type:"submit",style:{width:"100px"}},"\u0412\u043e\u0439\u0442\u0438"),r.a.createElement(Re,{type:"button",style:{marginLeft:"10px"},onClick:s},"\u0412\u043e\u0439\u0442\u0438 \u043f\u043e\u0434 \u0442\u0435\u0441\u0442\u043e\u0432\u044b\u043c \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u043e\u043c")))})),Ht=Object(l.b)((function(e){return{isAuth:e.auth.isAuth,captchaUrl:e.auth.captchaUrl}}),{login:function(e,t,a,n){return function(r){var s;return x.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,x.a.awrap(L(e,t,a,n));case 2:if(0!==(s=o.sent).resultCode){o.next=7;break}r(Mt()).then((function(){r(xt())})),o.next=11;break;case 7:if(10!==s.resultCode){o.next=10;break}return o.next=10,x.a.awrap(r(Ft()));case 10:r(Object(wt.a)("login",{_error:s.messages[0]}));case 11:case"end":return o.stop()}}))}}})((function(e){var t=e.login,a=e.isAuth,n=e.captchaUrl;se("\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f");return a?r.a.createElement(ce.a,{to:"/profile"}):r.a.createElement("div",null,r.a.createElement("h1",null,"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"),r.a.createElement(Wt,{initialValues:{rememberMe:!0},logTestAccount:function(){t("free@samuraijs.com","free",!0,"")},captchaUrl:n,onSubmit:function(e){var a=e.userLogin,n=e.password,r=e.rememberMe,s=e.captcha;t(a,n,r,s)}}))})),zt="samurai-network/profile/ADD_POST",Jt="samurai-network/profile/SET_USER_PROFILE",Kt="samurai-network/profile/SET_STATUS",Yt="samurai-network/profile/SET_PROFILE_PHOTO",qt="samurai-network/profile/SET_AVATAR_FETCHING",Qt={posts:[{id:1,text:"\u0412\u0430\u043c \u043d\u0440\u0430\u0432\u0438\u0442\u0441\u044f React?",likes:4},{id:2,text:"hey",likes:2}],profile:null,status:"",avatarIsFetching:!1};var Xt,Vt=function(e){return{type:Jt,profile:e}},Zt=function(e){return{type:Kt,status:e}},$t=function(e){return{type:qt,isFetching:e}},ea=function(e){return function(t){var a;return x.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e){n.next=6;break}return t(Vt(null)),n.next=4,x.a.awrap(j(e));case 4:a=n.sent,t(Vt(a));case 6:case"end":return n.stop()}}))}},ta=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case zt:var a={id:e.posts[e.posts.length-1].id+1,text:t.text,likes:0};return Object(y.a)({},e,{posts:[].concat(Object(ie.a)(e.posts),[a])});case Jt:return Object(y.a)({},e,{profile:t.profile});case Kt:return Object(y.a)({},e,{status:t.status});case Yt:return Object(y.a)({},e,{profile:Object(y.a)({},e.profile,{photos:t.photos})});case qt:return Object(y.a)({},e,{avatarIsFetching:t.isFetching});default:return e}},aa=a(58),na=a.n(aa),ra=a(77),sa=a.n(ra),oa=function(e){return r.a.createElement("div",{className:sa.a.post},r.a.createElement("div",null,r.a.createElement("img",{className:sa.a.avatar,src:"https://miro.medium.com/max/480/1*5LGjgBL2kWpog3AodB569A.jpeg",alt:""})),r.a.createElement("div",{className:sa.a.message},r.a.createElement("div",null,e.text),r.a.createElement("div",null,e.likes,"\u2665")))},ca=a(78),la=a.n(ca),ua=function(e){var t=e.style,a=e.placeholder,n=e.rows,s=void 0===n?1:n,o=e.cols,c=e.meta,l=e.input,u=e.id,i=e.value,m=e.onChange,p=e.onKeyDown,f=e.spanStyle,d=!!c&&(c.error&&c.touched);return r.a.createElement("span",{style:f,className:la.a.span},r.a.createElement("textarea",Object.assign({rows:s,cols:o,style:t,className:la.a.textarea,placeholder:a,id:u,value:i,onChange:m,onKeyDown:p},l)),d&&c&&r.a.createElement("span",{className:la.a.error},c.error))},ia=(Xt=10,function(e){if(e.length>Xt)return"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u0430 - ".concat(Xt)}),ma=Object(_t.a)({form:"profileAddNewPost"})((function(e){var t=e.handleSubmit;return r.a.createElement("form",{onSubmit:t},r.a.createElement("div",null,r.a.createElement(vt.a,{className:na.a.textarea,name:"newPost",component:ua,placeholder:"\u0427\u0442\u043e \u0443 \u0432\u0430\u0441 \u043d\u043e\u0432\u043e\u0433\u043e?",validate:[ht,ia],rows:2,style:{marginTop:"10px",width:"100%"}})),r.a.createElement("div",null,r.a.createElement(Re,{style:{marginTop:"10px"}},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c")))})),pa=r.a.memo((function(e){var t=e.posts,a=e.addPost,n=t.map((function(e){return r.a.createElement(oa,{key:e.id,text:e.text,likes:e.likes})})).reverse();return r.a.createElement("div",{className:na.a.posts},r.a.createElement("h2",{className:na.a.title},"\u041f\u043e\u0441\u0442\u044b"),r.a.createElement(ma,{onSubmit:function(e){a(e)}}),r.a.createElement("div",{className:na.a.postsList},n))})),fa=a(29),da=a.n(fa),ga=r.a.memo((function(e){var t=e.isOwner,a=e.savePhoto,s=e.profile,o=e.setAvatarIsFetching,c=e.avatarIsFetching,l=e.follow,u=e.unfollow,i=e.followingInProgress,m=e.isFollowingUser,p=e.userURL,f=Object(n.useRef)(null);var d=i.some((function(e){return e===p}));return r.a.createElement("div",{className:da.a.avatar},r.a.createElement("div",{className:da.a.avatarWrapper},c||!s?r.a.createElement(st,{stretch:!0}):r.a.createElement("img",{className:da.a.avatarIMG,src:s.photos.large||$e.a,alt:"avatar"})),t&&r.a.createElement("div",{className:da.a.upload},r.a.createElement("input",{className:da.a.uploadInput,onChange:function(e){var t=e.target.files[0];t&&t.type&&f.current&&("image/png"!==t.type&&"image/jpeg"!==t.type?f.current.textContent="\u041d\u0435 \u0432\u0435\u0440\u043d\u044b\u0439 \u0442\u0438\u043f \u0444\u0430\u0439\u043b\u0430\u2026":(f.current.textContent=t.name.length>20?t.name.slice(0,20)+"\u2026":t.name,o(!0),a(t)))},type:"file",id:"UserPhotoUpload"}),r.a.createElement("label",{ref:f,className:da.a.uploadLabel,htmlFor:"UserPhotoUpload"},"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u044e")),!t&&r.a.createElement(E.b,{className:da.a.sendMessage,to:"/messages/".concat(p)},r.a.createElement(Re,{style:{width:"100%"}},"\u041d\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435")),!t&&r.a.createElement(Re,{style:{width:"100%",marginTop:"10px",display:"flex",alignItems:"center",justifyContent:"center"},disabled:d,onClick:function(){p&&(m?u(p):l(p))}},m?r.a.createElement("span",null,r.a.createElement("span",{className:da.a.buttonText},"\u041e\u0442\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f"),r.a.createElement(w.a,{color:"#f03a17",icon:h.f})):r.a.createElement("span",null,r.a.createElement("span",{className:da.a.buttonText},"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f"),r.a.createElement(w.a,{color:"#16c60c",icon:h.a}))))})),Ea=a(104),va=a.n(Ea),_a=a(40),ha=a.n(_a),wa=r.a.memo((function(e){var t=e.status,a=e.updateStatus,s=e.isOwner,o=Object(n.useState)(!1),l=Object(c.a)(o,2),u=l[0],i=l[1],m=Object(n.useState)(t),p=Object(c.a)(m,2),f=p[0],d=p[1];Object(n.useEffect)((function(){d(t)}),[t]);var g=(t?ha.a.statusExist:ha.a.statusNotExist)+" "+ha.a.statusButton;return r.a.createElement("div",{className:ha.a.statusBox},u?r.a.createElement("input",{autoFocus:!0,onChange:function(e){d(e.currentTarget.value)},onBlur:function(){i(!1),f!==t&&a(f)},onFocus:function(e){e.currentTarget.select()},type:"text",value:f,className:ha.a.statusInput}):s&&r.a.createElement("button",{className:g,onClick:function(){i(!0)}},t||"\u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0442\u0430\u0442\u0443\u0441")||r.a.createElement("div",{className:ha.a.statusNotMe},t))})),ba=a(25),Na=a.n(ba),xa=Object(_t.a)({form:"edit-profile"})(r.a.memo((function(e){var t=e.handleSubmit,a=e.error,n=e.profile,s=e.setEditMode;return r.a.createElement("form",{onSubmit:t,className:Na.a.form},a&&r.a.createElement("div",{className:Na.a.error},a),r.a.createElement("h3",null,"\u041e\u0441\u043d\u043e\u0432\u043d\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f"),r.a.createElement("div",{className:Na.a.aboutMe},r.a.createElement("div",null,r.a.createElement("div",{className:Na.a.labelWrapper},r.a.createElement("label",{htmlFor:"dataFormName"},"\u0424\u0418\u041e:")),r.a.createElement(vt.a,{type:"text",placeholder:"\u0418\u043c\u044f",name:"fullName",component:Rt,validate:[ht],id:"dataFormName"})),r.a.createElement("div",null,r.a.createElement("div",{className:Na.a.labelWrapper},r.a.createElement("label",{htmlFor:"dataFormWork"},"\u0418\u0449\u0438\u0442\u0435 \u0440\u0430\u0431\u043e\u0442\u0443:")),r.a.createElement(vt.a,{type:"checkbox",name:"lookingForAJob",component:Rt,id:"dataFormWork"})),r.a.createElement("div",null,r.a.createElement("div",{className:Na.a.labelWrapper},r.a.createElement("label",{htmlFor:"dataFormSkills"},"\u0412\u0430\u0448\u0438 \u043d\u0430\u0432\u044b\u043a\u0438:")),r.a.createElement(vt.a,{rows:2,name:"lookingForAJobDescription",component:ua,validate:[ht],id:"dataFormSkills"})),r.a.createElement("div",null,r.a.createElement("div",{className:Na.a.labelWrapper},r.a.createElement("label",{htmlFor:"dataFormAbout"},"\u041e \u0412\u0430\u0441:")),r.a.createElement(vt.a,{rows:2,style:{width:"280px"},name:"aboutMe",component:ua,validate:[ht],id:"dataFormAbout"}))),r.a.createElement("hr",null),r.a.createElement("h3",null,"\u0412\u0430\u0448\u0438 \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u044b"),r.a.createElement("div",{className:Na.a.myContacts},Object.keys(n.contacts).map((function(e){return r.a.createElement("div",{key:e},r.a.createElement("div",{className:Na.a.labelWrapper},r.a.createElement("label",{htmlFor:"dataForm"+e},e[0].toUpperCase()+e.slice(1),":")),r.a.createElement(vt.a,{type:"text",name:"contacts."+e,component:Rt,id:"dataForm"+e}))}))),r.a.createElement("div",{className:Na.a.buttons},r.a.createElement(Re,{type:"submit"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),r.a.createElement(Re,{style:{marginLeft:"10px"},type:"button",onClick:function(){s(!1)}},"\u041e\u0442\u043c\u0435\u043d\u0430")))}))),Ia=a(79),ya=a.n(Ia),Oa=r.a.memo((function(e){var t=e.profile,a=Object.values(t.contacts).some((function(e){return null!==e}));return r.a.createElement("dl",{className:ya.a.about},r.a.createElement("div",null,r.a.createElement("dt",null,"\u0418\u0449\u0443 \u0440\u0430\u0431\u043e\u0442\u0443:"),r.a.createElement("dd",null," ",t.lookingForAJob?"\u0434\u0430":"\u043d\u0435\u0442")),r.a.createElement("div",null,r.a.createElement("dt",null,"\u041c\u043e\u0438 \u043d\u0430\u0432\u044b\u043a\u0438:"),r.a.createElement("dd",null," ",t.lookingForAJobDescription||"\u043d\u0435\u0442\u0443")),r.a.createElement("div",null,r.a.createElement("dt",null,"\u041e\u0431\u043e \u043c\u043d\u0435:"),r.a.createElement("dd",null," ",t.aboutMe||"\u043d\u0435 \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e")),a&&r.a.createElement("hr",null),a&&r.a.createElement("div",{className:ya.a.contacts},r.a.createElement("dt",null,"\u041c\u043e\u0438 \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u044b:"),r.a.createElement("dd",null,r.a.createElement("dl",{className:ya.a.contactsList},Object.entries(t.contacts).map((function(e){var a=e[0];return e[1]?r.a.createElement("div",{key:a},r.a.createElement("dt",null,a,":"),r.a.createElement("dd",null,r.a.createElement("a",{rel:"noopener noreferrer",target:"_blank",href:t.contacts[a]},t.contacts[a]))):null}))))))})),Ca=r.a.memo((function(e){var t=e.profile,a=e.status,s=e.isOwner,o=e.saveProfile,l=e.updateStatus,u=Object(n.useState)(!1),i=Object(c.a)(u,2),m=i[0],p=i[1];return r.a.createElement("div",{className:va.a.info},r.a.createElement("div",null,r.a.createElement("h1",{className:va.a.userName},t.fullName),r.a.createElement(wa,{status:a,updateStatus:l,isOwner:s}),(a||s)&&r.a.createElement("hr",null),m?r.a.createElement(xa,{setEditMode:p,profile:t,initialValues:t,onSubmit:function(e){return x.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.a.awrap(o(e));case 2:p(!1);case 3:case"end":return t.stop()}}))}}):r.a.createElement(Oa,{profile:t})),s&&!m&&r.a.createElement("div",null,r.a.createElement(Re,{onClick:function(){p(!0)}},"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c")))})),Sa=r.a.memo((function(e){var t=e.profile,a=e.savePhoto,n=e.status,s=e.updateStatus,o=e.isOwner,c=e.saveProfile,l=e.avatarIsFetching,u=e.setAvatarIsFetching,i=e.follow,m=e.unfollow,p=e.followingInProgress,f=e.isFollowingUser,d=e.userURL;return t?r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(ga,{savePhoto:a,profile:t,isOwner:o,avatarIsFetching:l,setAvatarIsFetching:u,follow:i,unfollow:m,followingInProgress:p,isFollowingUser:f,userURL:d}),r.a.createElement(Ca,{status:n,updateStatus:s,saveProfile:c,profile:t,isOwner:o})):r.a.createElement(st,null)}));var Pa=Object(l.b)((function(e){return{profile:e.profile.profile,status:e.profile.status,userID:e.auth.userId,avatarIsFetching:e.profile.avatarIsFetching,myProfile:e.auth.myProfile,isAuth:e.auth.isAuth,followingInProgress:e.users.followingInProgress,isFollowingUser:e.users.isFollowingUser,posts:e.profile.posts}}),{getUsersProfile:ea,getStatus:function(e){return function(t){var a;return x.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,x.a.awrap(A(e));case 2:a=n.sent,t(Zt(a));case 4:case"end":return n.stop()}}))}},updateStatus:function(e){return function(t){return x.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,x.a.awrap(M(e));case 2:0===a.sent.resultCode&&t(Zt(e));case 4:case"end":return a.stop()}}))}},savePhoto:function(e){return function(t){var a;return x.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,x.a.awrap(F(e));case 2:0===(a=n.sent).resultCode&&(t((r=a.data.photos,{type:Yt,photos:r})),t(At(a.data.photos)),t($t(!1)));case 4:case"end":return n.stop()}var r}))}},saveProfile:function(e){return function(t,a){var n;return x.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,x.a.awrap(T(e));case 2:if(0!==(n=r.sent).resultCode){r.next=8;break}return r.next=6,x.a.awrap(t(ea(a().auth.userId)));case 6:r.next=10;break;case 8:return t(Object(wt.a)("edit-profile",{_error:n.messages[0]})),r.abrupt("return",Promise.reject());case 10:case"end":return r.stop()}}))}},setAvatarIsFetching:$t,saveMyProfile:function(e){return function(t){var a;return x.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,x.a.awrap(T(e));case 2:if(0!==(a=n.sent).resultCode){n.next=8;break}return n.next=6,x.a.awrap(t(jt(e)));case 6:n.next=10;break;case 8:return t(Object(wt.a)("edit-profile",{_error:a.messages[0]})),n.abrupt("return",Promise.reject());case 10:case"end":return n.stop()}}))}},follow:Oe,unfollow:Ce,isFollowing:function(e){return function(t){var a;return x.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,x.a.awrap(P(e));case 2:a=n.sent,t(ye(a));case 4:case"end":return n.stop()}}))}},addPost:function(e){return{type:zt,text:e.newPost}}})((function(e){var t=e.savePhoto,a=e.profile,s=e.status,o=e.updateStatus,c=e.saveProfile,l=e.userID,u=e.getUsersProfile,i=e.getStatus,m=e.avatarIsFetching,p=e.setAvatarIsFetching,f=e.myProfile,d=e.saveMyProfile,g=e.isAuth,E=e.follow,v=e.unfollow,_=e.followingInProgress,h=e.isFollowing,w=e.isFollowingUser,b=e.posts,N=e.addPost,x=Object(ce.g)().userID,I=x?+x:l,y=l===I;return se(a?a.fullName:null),Object(n.useEffect)((function(){I&&g&&h(+I)}),[I,h,g]),Object(n.useEffect)((function(){I&&(u(I),i(I))}),[I,u,i]),g?r.a.createElement(r.a.Fragment,null,r.a.createElement(Sa,{savePhoto:t,profile:y?f:a,status:s,updateStatus:o,isOwner:y,saveProfile:y?d:c,avatarIsFetching:m,setAvatarIsFetching:p,follow:E,unfollow:v,followingInProgress:_,isFollowingUser:w,userURL:I?+I:null}),r.a.createElement(pa,{posts:b,addPost:N})):r.a.createElement(ce.a,{to:"/login"})})),Da=a(154),ka=a.n(Da),ja=a(155),Aa=a.n(ja),Ma=a(31),Fa=a.n(Ma),Ta=function(e){var t=e.id,a=e.userName,s=e.hasNewMessages,o=e.lastDialogActivityDate,l=(e.lastUserActivityDate,e.newMessagesCount),u=e.photos,i=Object(n.useState)(!1),m=Object(c.a)(i,2),p=m[0],f=m[1];return Object(n.useEffect)((function(){var e=new Date,t=e.setDate(e.getDate()+1),a=e.setDate(e.getDate()-1),n=new Date(o).getTime();f(a<n&&n<t)}),[o]),r.a.createElement("li",{className:Fa.a.li},r.a.createElement(E.b,{className:Fa.a.a,to:"/messages/".concat(t),activeClassName:Fa.a.active},r.a.createElement("img",{className:Fa.a.avatar,src:u.small||$e.a,alt:"avatar"}),r.a.createElement("div",{className:Fa.a.info},r.a.createElement("div",{className:Fa.a.infoMessage},r.a.createElement("span",{className:Fa.a.userName},a),s&&r.a.createElement("span",null,l,r.a.createElement("span",{role:"img","aria-label":"\u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435"},"\ud83d\udcac"))),r.a.createElement("div",{className:Fa.a.lastMessage},p?new Date(o).toLocaleTimeString().slice(0,5):new Date(o).toLocaleDateString()))))},Ua=function(e){var t=e.interlocutors;return r.a.createElement("ul",{className:Aa.a.ul},t.map((function(e){return r.a.createElement(Ta,{key:e.id,id:e.id,userName:e.userName,hasNewMessages:e.hasNewMessages,lastDialogActivityDate:e.lastDialogActivityDate,lastUserActivityDate:e.lastUserActivityDate,newMessagesCount:e.newMessagesCount,photos:e.photos})})))},La=r.a.memo((function(e){var t=e.interlocutors;return r.a.createElement("div",{className:ka.a.wrapper},t?r.a.createElement(Ua,{interlocutors:t}):r.a.createElement(st,{stretch:!0}))})),Ra=a(156),Ba=a.n(Ra),Ga=a(80),Wa=a.n(Ga),Ha=function(){return r.a.createElement("div",{className:Wa.a.wrapper},r.a.createElement("div",{className:Wa.a.elem},r.a.createElement("div",{className:Wa.a.messagesIMG}),r.a.createElement("div",null,"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u043e\u0431\u0435\u0441\u0435\u0434\u043d\u0438\u043a\u0430")))},za=a(49),Ja=a.n(za),Ka=r.a.memo((function(e){var t,a=e.interlocutor;return r.a.createElement("div",{className:Ja.a.wrapper},r.a.createElement("div",{className:Ja.a.info},r.a.createElement(E.b,{to:"/profile/".concat(a.id),className:Ja.a.userName},a.userName),a.lastUserActivityDate&&r.a.createElement("div",{className:Ja.a.online},"\u0411\u044b\u043b \u0432 \u0441\u0435\u0442\u0438 - ",new Date(a.lastUserActivityDate).toLocaleString())),r.a.createElement(E.b,{to:"/profile/".concat(a.id)},r.a.createElement("img",{className:Ja.a.avatar,src:(null===(t=a.photos)||void 0===t?void 0:t.small)?a.photos.small:$e.a||$e.a,alt:"avatar"})))})),Ya=a(157),qa=a.n(Ya),Qa=a(41),Xa=a.n(Qa),Va=function(e){e.messageID;var t=e.message,a=(e.translatedMessage,e.addedAt),n=e.senderID,s=e.senderName,o=(e.recipientID,e.viewed,e.lastSenderID),c=e.interlocutorPhoto,l=e.myPhoto,u=e.myID,i=e.firstMessage,m=o!==n,p=n===u?l:c;return r.a.createElement("div",{className:Xa.a.wrapper,style:{marginTop:m?i?"0":"30px":"15px"}},m&&r.a.createElement(r.a.Fragment,null,r.a.createElement(E.b,{to:"/profile/".concat(n)},r.a.createElement("img",{className:Xa.a.avatar,src:p||$e.a,alt:"avatar"})),r.a.createElement(E.b,{className:Xa.a.aName,to:"/profile/".concat(n)},r.a.createElement("span",{className:Xa.a.name},s)),r.a.createElement("span",{className:Xa.a.time},new Date(a).toLocaleTimeString().slice(0,5))),r.a.createElement("div",{className:Xa.a.message},t))},Za=r.a.memo((function(e){var t=e.dialog,a=e.myPhoto,n=e.interlocutorPhoto,s=e.myID,o=e.isFetching,c=[];if(t)for(var l=0,u=0;u<t.length;u++)c.push(r.a.createElement(Va,{key:t[u].id,messageID:t[u].id,message:t[u].body,translatedMessage:t[u].translatedBody,addedAt:t[u].addedAt,senderID:t[u].senderId,senderName:t[u].senderName,recipientID:t[u].recipientId,viewed:t[u].viewed,lastSenderID:l,interlocutorPhoto:n,myPhoto:a,myID:s,firstMessage:0===u})),l=t[u].senderId;return r.a.createElement("div",{className:qa.a.wrapper},o&&c?r.a.createElement(st,{stretch:!0}):c)})),$a=a(158),en=a.n($a),tn=r.a.memo((function(e){var t=e.sendMessage,a=(e.startChatting,e.userID),s=e.sendMessageFetching,o=Object(n.useState)(""),l=Object(c.a)(o,2),u=l[0],i=l[1];return r.a.createElement("div",{className:en.a.wrapper},r.a.createElement(ua,{onChange:function(e){i(e.currentTarget.value),e.currentTarget.style.height="auto",e.currentTarget.style.height=e.currentTarget.scrollHeight+"px"},value:u,style:{maxHeight:"200px",resize:"none",minHeight:"40px",width:"100%"},spanStyle:{flexGrow:1},placeholder:"\u041d\u0430\u043f\u0438\u0448\u0438\u0442\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435\u2026",onKeyDown:function(e){u.trim()&&13===e.keyCode&&(t(a,u.trim()),i(""),e.preventDefault())}}),r.a.createElement(Re,{style:{height:"40px",marginLeft:"20px"},disabled:s||!u.trim(),onClick:function(){t(a,u),i("")}},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"))})),an=r.a.memo((function(e){var t=e.currentDialog,a=e.interlocutor,s=e.userID,o=e.myPhoto,l=e.myID,u=e.dialogFetching,i=e.newInterlocutor,m=e.sendMessage,p=e.startChatting,f=e.sendMessageFetching,d=Object(n.useState)({id:null,userName:null,lastUserActivityDate:null,photos:null}),g=Object(c.a)(d,2),E=g[0],v=g[1];return Object(n.useEffect)((function(){!a&&i&&v({id:i.userId,userName:i.fullName,lastUserActivityDate:null,photos:i.photos}),(a&&!i||a&&i)&&v({id:a.id,userName:a.userName,lastUserActivityDate:a.lastUserActivityDate,photos:a.photos})}),[a,i]),s?r.a.createElement("div",{className:Ba.a.wrapper},r.a.createElement(Ka,{interlocutor:E}),r.a.createElement(Za,{myID:l,dialog:t,interlocutorPhoto:E.photos?E.photos.small:null,myPhoto:o,isFetching:u}),r.a.createElement(tn,{sendMessage:m,startChatting:p,userID:s,sendMessageFetching:f})):r.a.createElement(Ha,null)})),nn=a(159),rn=a.n(nn);var sn=Object(l.b)((function(e){return{interlocutors:e.messages.interlocutors,newInterlocutor:e.messages.newInterlocutor,currentDialog:e.messages.currentDialog,messagesAfterDate:e.messages.messagesAfterDate,fetching:e.messages.fetching,isAuth:e.auth.isAuth,myProfile:e.auth.myProfile,currentInterlocutor:e.messages.currentInterlocutor}}),{startChatting:function(e){return function(){return x.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.a.awrap(G(e));case 2:case"end":return t.stop()}}))}},getInterlocutors:ae,getNewInterlocutor:function(e){return function(t){var a;return x.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t(te("newInterlocutor",!0)),n.next=3,x.a.awrap(j(e));case 3:a=n.sent,t({type:q,profile:a}),t(te("newInterlocutor",!1));case 6:case"end":return n.stop()}}))}},getDialog:ne,getMessagesAfterDate:function(e,t){return function(a){var n;return x.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return a(te("messagesAfterDate",!0)),r.next=3,x.a.awrap(J(e,t));case 3:n=r.sent,a({type:X,messagesAfterDate:n}),a(te("messagesAfterDate",!1));case 6:case"end":return r.stop()}}))}},sendMessage:function(e,t){return function(a,n,r){return x.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return a(te("sendMessage",!0)),s.next=3,x.a.awrap(z(e,t));case 3:0===s.sent.resultCode&&Promise.resolve().then((function(){ne(e)(a,n,r),ae()(a,n,r)})).then((function(){a(te("sendMessage",!1))}));case 5:case"end":return s.stop()}}))}},setCurrentInterlocutor:function(e){return{type:Z,userID:e}}})((function(e){var t=e.interlocutors,a=e.newInterlocutor,s=e.getNewInterlocutor,o=e.currentDialog,l=(e.messagesAfterDate,e.fetching),u=e.startChatting,i=e.getInterlocutors,m=e.getDialog,p=e.sendMessage,f=(e.getMessagesAfterDate,e.isAuth),d=e.myProfile,g=e.currentInterlocutor,E=e.setCurrentInterlocutor,v=Object(ce.g)().userID,_=Object(n.useState)(null),h=Object(c.a)(_,2),w=h[0],b=h[1];return se("\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f"),Object(n.useEffect)((function(){v&&+v!==g&&E(+v)}),[g,E,v]),Object(n.useEffect)((function(){f&&i()}),[i,f]),Object(n.useEffect)((function(){v&&s(+v)}),[s,v]),Object(n.useEffect)((function(){v&&f&&m(+v)}),[m,f,v]),Object(n.useEffect)((function(){v&&t&&b(t.find((function(e){return e.id===+v}))||null)}),[v,t]),f?!v&&g?r.a.createElement(ce.a,{to:"/messages/".concat(g)}):r.a.createElement("div",{className:rn.a.messages},r.a.createElement(La,{interlocutors:t}),r.a.createElement(an,{userID:v?+v:null,interlocutor:w,currentDialog:o,myPhoto:d?d.photos.small:null,myID:d?d.userId:null,dialogFetching:l.currentDialog,newInterlocutor:a,sendMessage:p,startChatting:u,sendMessageFetching:l.sendMessage})):r.a.createElement(ce.a,{to:"/login"})}));var on=function(){return r.a.createElement("div",{className:ue.a.content},r.a.createElement(ce.d,null,r.a.createElement(ce.b,{exact:!0,path:"/",render:function(){return r.a.createElement(ce.a,{to:"/profile"})}}),r.a.createElement(ce.b,{path:"/profile/:userID?",render:function(){return r.a.createElement(Pa,null)}}),r.a.createElement(ce.b,{path:"/messages/:userID?",render:function(){return r.a.createElement(sn,null)}}),r.a.createElement(ce.b,{path:"/users",render:function(){return r.a.createElement(ct,null)}}),r.a.createElement(ce.b,{path:"/news",component:it}),r.a.createElement(ce.b,{path:"/music",component:ft}),r.a.createElement(ce.b,{path:"/settings",component:Et}),r.a.createElement(ce.b,{path:"/login",render:function(){return r.a.createElement(Ht,null)}}),r.a.createElement(ce.b,{path:"*",render:function(){return"404"}})))},cn=a(37),ln=a.n(cn),un=Object(l.b)((function(e){return{isAuth:e.auth.isAuth,myProfile:e.auth.myProfile}}),{logout:function(){return function(e){return x.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.a.awrap(R());case 2:0===t.sent.resultCode&&e(Dt(null,null,null,!1));case 4:case"end":return t.stop()}}))}}})((function(e){var t=e.isAuth,a=e.logout,n=e.myProfile;return r.a.createElement("header",{className:ln.a.header},r.a.createElement("div",{className:ln.a.container},r.a.createElement("div",{className:ln.a.title},"Samurai Network"),t&&n&&n.photos.small?r.a.createElement("div",{className:ln.a.infoMe},r.a.createElement(E.b,{to:"/profile",className:ln.a.userName},r.a.createElement("span",null,n.fullName.split(" ")[0])),r.a.createElement(E.b,{to:"/profile",className:ln.a.avatar},r.a.createElement("img",{src:n.photos.small,alt:"avatar"})),r.a.createElement(Re,{onClick:a},"\u0412\u044b\u0439\u0442\u0438")):r.a.createElement(E.b,{to:"/login",className:ln.a.login},r.a.createElement(Re,null,"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f"))))})),mn=a(42),pn=a.n(mn),fn=function(e){var t=e.children,a=e.close,s=e.title;Object(n.useEffect)((function(){return document.body.style.overflow="hidden",function(){document.body.style.overflow="auto"}}));return r.a.createElement("div",{onClick:function(e){e.target.dataset.close&&a()},className:pn.a.wrapper,"data-close":!0},r.a.createElement("div",{className:pn.a.childrenBox},r.a.createElement("div",{className:pn.a.control},r.a.createElement("span",{className:pn.a.title},s),r.a.createElement("button",{autoFocus:!0,onClick:a,className:pn.a.closeButton},r.a.createElement(w.a,{icon:h.f,size:"3x",color:"#141414"}))),r.a.createElement("div",{className:pn.a.children},t)))};var dn=Object(l.b)((function(e){return{initialized:e.init.initialized}}),{initializeApp:function(){return function(e){return x.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:e(Mt()).then((function(){e(xt()).then((function(){e({type:bt})}))}));case 1:case"end":return t.stop()}}))}}})((function(e){var t=e.initializeApp,a=e.initialized;Object(n.useEffect)((function(){t()}),[t]);var s=Object(n.useState)(!1),o=Object(c.a)(s,2),l=o[0],u=o[1],m=Object(n.useState)(null),p=Object(c.a)(m,2),d=p[0],g=(p[1],Object(n.useState)("")),v=Object(c.a)(g,2),_=v[0];v[1];return a?r.a.createElement(E.a,null,r.a.createElement("div",{className:i.a.page},r.a.createElement(un,null),r.a.createElement("div",{className:i.a.wrapper},r.a.createElement("main",{className:i.a.main},r.a.createElement(oe,null),r.a.createElement(on,null))),r.a.createElement(f,null),l?r.a.createElement(fn,{title:_,close:function(){u(!1)}},d):null)):r.a.createElement("div",{className:i.a.page},r.a.createElement(st,{stretch:!0}))})),gn=a(11),En=a(160),vn=a(138),_n=Object(gn.c)({profile:ta,messages:re,users:Se,auth:Tt,init:It,form:vn.a}),hn=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||gn.d,wn=Object(gn.e)(_n,hn(Object(gn.a)(En.a)));o.a.render(r.a.createElement(l.a,{store:wn},r.a.createElement(dn,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},37:function(e,t,a){e.exports={header:"Header_header__2CR8J",container:"Header_container__HDvgl",userName:"Header_userName__3dpGW",avatar:"Header_avatar__34Ghc",infoMe:"Header_infoMe__UMQTd",title:"Header_title__1NDT_"}},40:function(e,t,a){e.exports={statusBox:"Status_statusBox__3qS3R",statusButton:"Status_statusButton__2FD5f",statusInput:"Status_statusInput__2o4UG",statusNotMe:"Status_statusNotMe__22woT",statusNotExist:"Status_statusNotExist__2Ayt_",statusExist:"Status_statusExist__2EA9K"}},41:function(e,t,a){e.exports={wrapper:"DialogMessagesItem_wrapper__D7RSz",avatar:"DialogMessagesItem_avatar__kICSw",name:"DialogMessagesItem_name__5Xel9",time:"DialogMessagesItem_time__1OJ-S",aName:"DialogMessagesItem_aName__q09QC"}},42:function(e,t,a){e.exports={wrapper:"ModalWindow_wrapper__1q2TF",childrenBox:"ModalWindow_childrenBox__1GCYg",control:"ModalWindow_control__3EN38",closeButton:"ModalWindow_closeButton__bdh7z",children:"ModalWindow_children__11hkC",title:"ModalWindow_title__wXpEM"}},49:function(e,t,a){e.exports={wrapper:"InterlocutorInfo_wrapper__1YcGt",info:"InterlocutorInfo_info__11Ihl",avatar:"InterlocutorInfo_avatar__1YtOI",userName:"InterlocutorInfo_userName__2BFJg",online:"InterlocutorInfo_online__2G9Er"}},57:function(e,t,a){e.exports={page:"App_page__4Klr-",wrapper:"App_wrapper__Jca9l",main:"App_main__1nCkj"}},58:function(e,t,a){e.exports={posts:"Posts_posts__epRJ6",title:"Posts_title__3oTfI",textarea:"Posts_textarea__1CXXA",postsList:"Posts_postsList__3exEI"}},7:function(e,t,a){e.exports={menu:"Menu_menu__27qdF",menuItem:"Menu_menuItem__Q_Lyt",menuLink:"Menu_menuLink__EHAtu",active:"Menu_active__2D1vX",linkText:"Menu_linkText__36TKD",linkIcon:"Menu_linkIcon__18TNY"}},74:function(e,t,a){e.exports={div:"Search_div__2HjV8",input:"Search_input__1SF7g",button:"Search_button__tmFR-",reset:"Search_reset__2G7ng"}},75:function(e,t,a){e.exports={paginationItems:"Paginator_paginationItems__2iECZ",button:"Paginator_button__1_Jp0"}},77:function(e,t,a){e.exports={post:"Post_post__lASZN",avatar:"Post_avatar__3eC36",message:"Post_message__3tS2K"}},78:function(e,t,a){e.exports={textarea:"Textarea_textarea__32chH",error:"Textarea_error__1Ernb"}},79:function(e,t,a){e.exports={contactsList:"ProfileData_contactsList__ZEb2E",about:"ProfileData_about__2NVys",contacts:"ProfileData_contacts__KLq0S"}},80:function(e,t,a){e.exports={wrapper:"SelectInterlocutor_wrapper__1dg4h",elem:"SelectInterlocutor_elem__QCwpf",messagesIMG:"SelectInterlocutor_messagesIMG__eC6TV"}},99:function(e,t,a){e.exports={paginationItem:"PaginationItem_paginationItem__1EdWb",paginationItemActive:"PaginationItem_paginationItemActive__1EfE6"}}},[[186,1,2]]]);
//# sourceMappingURL=main.ae258e46.chunk.js.map